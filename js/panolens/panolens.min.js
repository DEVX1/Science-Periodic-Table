THREE.DeviceOrientationControls=function(t){var e=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0;var n=function(t){e.deviceOrientation=t},i=function(){e.screenOrientation=window.orientation||0},o=function(){var t=new THREE.Vector3(0,0,1),e=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,r,a,s,h){e.set(a,r,-s,"YXZ"),o.setFromEuler(e),o.multiply(i),o.multiply(n.setFromAxisAngle(t,-h))}}();this.connect=function(){i(),window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",n,!1),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",i,!1),window.removeEventListener("deviceorientation",n,!1),e.enabled=!1},this.update=function(){if(e.enabled!==!1){var t=e.deviceOrientation.alpha?THREE.Math.degToRad(e.deviceOrientation.alpha):0,n=e.deviceOrientation.beta?THREE.Math.degToRad(e.deviceOrientation.beta):0,i=e.deviceOrientation.gamma?THREE.Math.degToRad(e.deviceOrientation.gamma):0,r=e.screenOrientation?THREE.Math.degToRad(e.screenOrientation):0;o(e.object.quaternion,t,n,i,r)}},this.dispose=function(){this.disconnect()},this.connect()},THREE.CardboardEffect=function(t){var e=new THREE.OrthographicCamera(-1,1,1,-1,0,1),n=new THREE.Scene,i=new THREE.StereoCamera;i.aspect=.5;var o={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat},r=new THREE.WebGLRenderTarget(512,512,o);r.scissorTest=!0;var a=new THREE.Vector2(.441,.156),s=new THREE.PlaneBufferGeometry(1,1,10,20).removeAttribute("normal").toNonIndexed(),h=s.attributes.position.array,c=s.attributes.uv.array,u=new Float32Array(2*h.length);u.set(h),u.set(h,h.length);var l=new Float32Array(2*c.length);l.set(c),l.set(c,c.length);for(var d=new THREE.Vector2,p=h.length/3,f=0,E=u.length/3;E>f;f++){d.x=u[3*f+0],d.y=u[3*f+1];var m=d.dot(d),g=1.5+(a.x+a.y*m)*m,y=p>f?0:1;u[3*f+0]=d.x/g*1.5-.5+y,u[3*f+1]=d.y/g*3,l[2*f]=.5*(l[2*f]+y)}s.attributes.position.array=u,s.attributes.uv.array=l;var A=new THREE.MeshBasicMaterial({map:r}),v=new THREE.Mesh(s,A);n.add(v),this.setSize=function(e,n){r.setSize(e,n),t.setSize(e,n)},this.render=function(o,a){o.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),i.update(a);var s=r.width/2,h=r.height;r.scissor.set(0,0,s,h),r.viewport.set(0,0,s,h),t.render(o,i.cameraL,r),r.scissor.set(s,0,s,h),r.viewport.set(s,0,s,h),t.render(o,i.cameraR,r),t.render(n,e)}},function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var t=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-t}}}();var TWEEN=TWEEN||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e){if(0===t.length)return!1;var n=0;for(e=void 0!==e?e:window.performance.now();n<t.length;)t[n].update(e)?n++:t.splice(n,1);return!0}}}();TWEEN.Tween=function(t){var e=t,n={},i={},o={},r=1e3,a=0,s=!1,h=!1,c=!1,u=0,l=null,d=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,f=[],E=null,m=!1,g=null,y=null,A=null;for(var v in t)n[v]=parseFloat(t[v],10);this.to=function(t,e){return void 0!==e&&(r=e),i=t,this},this.start=function(t){TWEEN.add(this),h=!0,m=!1,l=void 0!==t?t:window.performance.now(),l+=u;for(var r in i){if(i[r]instanceof Array){if(0===i[r].length)continue;i[r]=[e[r]].concat(i[r])}void 0!==n[r]&&(n[r]=e[r],n[r]instanceof Array==!1&&(n[r]*=1),o[r]=n[r]||0)}return this},this.stop=function(){return h?(TWEEN.remove(this),h=!1,null!==A&&A.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=f.length;e>t;t++)f[t].stop()},this.delay=function(t){return u=t,this},this.repeat=function(t){return a=t,this},this.yoyo=function(t){return s=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return p=t,this},this.chain=function(){return f=arguments,this},this.onStart=function(t){return E=t,this},this.onUpdate=function(t){return g=t,this},this.onComplete=function(t){return y=t,this},this.onStop=function(t){return A=t,this},this.update=function(t){var h,A,v;if(l>t)return!0;m===!1&&(null!==E&&E.call(e),m=!0),A=(t-l)/r,A=A>1?1:A,v=d(A);for(h in i)if(void 0!==n[h]){var w=n[h]||0,N=i[h];N instanceof Array?e[h]=p(N,v):("string"==typeof N&&(N=N.startsWith("+")||N.startsWith("-")?w+parseFloat(N,10):parseFloat(N,10)),"number"==typeof N&&(e[h]=w+(N-w)*v))}if(null!==g&&g.call(e,v),1===A){if(a>0){isFinite(a)&&a--;for(h in o){if("string"==typeof i[h]&&(o[h]=o[h]+parseFloat(i[h],10)),s){var L=o[h];o[h]=i[h],i[h]=L}n[h]=o[h]}return s&&(c=!c),l=t+u,!0}null!==y&&y.call(e);for(var M=0,b=f.length;b>M;M++)f[M].start(l+r);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)))},Out:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},InOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),r=TWEEN.Interpolation.Utils.Linear;return 0>e?r(t[0],t[1],i):e>1?r(t[n],t[n-1],n-i):r(t[o],t[o+1>n?n:o+1],i-o)},Bezier:function(t,e){for(var n=0,i=t.length-1,o=Math.pow,r=TWEEN.Interpolation.Utils.Bernstein,a=0;i>=a;a++)n+=o(1-e,i-a)*o(e,a)*t[a]*r(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),r=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(0>e&&(o=Math.floor(i=n*(1+e))),r(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o)):0>e?t[0]-(r(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(r(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):r(t[o?o-1:0],t[o],t[o+1>n?n:o+1],t[o+2>n?n:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=TWEEN.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,o){var r=.5*(n-t),a=.5*(i-e),s=o*o,h=o*s;return(2*e-2*n+r+a)*h+(-3*e+3*n-2*r-a)*s+r*o+e}}},function(t){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==t&&(t.TWEEN=TWEEN)}(this),THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*g.autoRotateSpeed}function i(){return Math.pow(.95,g.zoomSpeed)}function o(t){if(H=!1,f=E=0,g.enabled!==!1){if(t.preventDefault(),t.button===g.mouseButtons.ORBIT){if(g.noRotate===!0)return;U=z.ROTATE,A.set(t.clientX,t.clientY)}else if(t.button===g.mouseButtons.ZOOM){if(g.noZoom===!0)return;U=z.DOLLY,O.set(t.clientX,t.clientY)}else if(t.button===g.mouseButtons.PAN){if(g.noPan===!0)return;U=z.PAN,N.set(t.clientX,t.clientY)}U!==z.NONE&&(document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",a,!1),g.dispatchEvent(G))}}function r(t){if(g.enabled!==!1){t.preventDefault();var e=g.domElement===document?g.domElement.body:g.domElement;if(U===z.ROTATE){if(g.noRotate===!0)return;v.set(t.clientX,t.clientY),w.subVectors(v,A),g.rotateLeft(2*Math.PI*w.x/e.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*w.y/e.clientHeight*g.rotateSpeed),A.copy(v),m&&(f=t.clientX-m.clientX,E=t.clientY-m.clientY),m=t}else if(U===z.DOLLY){if(g.noZoom===!0)return;I.set(t.clientX,t.clientY),S.subVectors(I,O),S.y>0?g.dollyIn():S.y<0&&g.dollyOut(),O.copy(I)}else if(U===z.PAN){if(g.noPan===!0)return;L.set(t.clientX,t.clientY),M.subVectors(L,N),g.pan(M.x,M.y),N.copy(L)}U!==z.NONE&&g.update()}}function a(){H=!0,m=void 0,g.enabled!==!1&&(document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",a,!1),g.dispatchEvent(W),U=z.NONE)}function s(t){if(g.enabled!==!1&&g.noZoom!==!0&&U===z.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?(g.object.fov=g.object.fov<g.maxFov?g.object.fov+1:g.maxFov,g.object.updateProjectionMatrix()):0>e&&(g.object.fov=g.object.fov>g.minFov?g.object.fov-1:g.minFov,g.object.updateProjectionMatrix()),g.update(),g.dispatchEvent(G),g.dispatchEvent(W)}}function h(t){if(g.enabled!==!1&&g.noKeys!==!0&&g.noPan!==!0)switch(t.keyCode){case g.keys.UP:g.pan(0,g.keyPanSpeed),g.update();break;case g.keys.BOTTOM:g.pan(0,-g.keyPanSpeed),g.update();break;case g.keys.LEFT:g.pan(g.keyPanSpeed,0),g.update();break;case g.keys.RIGHT:g.pan(-g.keyPanSpeed,0),g.update()}}function c(t){if(H=!1,f=E=0,g.enabled!==!1){switch(t.touches.length){case 1:if(g.noRotate===!0)return;U=z.TOUCH_ROTATE,A.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(g.noZoom===!0)return;U=z.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;Math.sqrt(e*e+n*n);break;case 3:if(g.noPan===!0)return;U=z.TOUCH_PAN,N.set(t.touches[0].pageX,t.touches[0].pageY);break;default:U=z.NONE}U!==z.NONE&&g.dispatchEvent(G)}}function u(t){if(g.enabled!==!1){t.preventDefault(),t.stopPropagation();var e=g.domElement===document?g.domElement.body:g.domElement;switch(t.touches.length){case 1:if(g.noRotate===!0)return;if(U!==z.TOUCH_ROTATE)return;v.set(t.touches[0].pageX,t.touches[0].pageY),w.subVectors(v,A),g.rotateLeft(2*Math.PI*w.x/e.clientWidth*g.rotateSpeed),g.rotateUp(2*Math.PI*w.y/e.clientHeight*g.rotateSpeed),A.copy(v),m&&(f=t.touches[0].pageX-m.pageX,E=t.touches[0].pageY-m.pageY),m={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},g.update();break;case 2:if(g.noZoom===!0)return;if(U!==z.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;Math.sqrt(n*n+i*i);t.scale<1?(g.object.fov=g.object.fov<g.maxFov?g.object.fov+1:g.maxFov,g.object.updateProjectionMatrix()):t.scale>1&&(g.object.fov=g.object.fov>g.minFov?g.object.fov-1:g.minFov,g.object.updateProjectionMatrix()),g.update();break;case 3:if(g.noPan===!0)return;if(U!==z.TOUCH_PAN)return;L.set(t.touches[0].pageX,t.touches[0].pageY),M.subVectors(L,N),g.pan(M.x,M.y),N.copy(L),g.update();break;default:U=z.NONE}}}function l(){H=!0,m=void 0,g.enabled!==!1&&(g.dispatchEvent(W),U=z.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=.005,this.minFov=30,this.maxFov=120,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var d,p,f,E,m,g=this,y=1e-6,A=new THREE.Vector2,v=new THREE.Vector2,w=new THREE.Vector2,N=new THREE.Vector2,L=new THREE.Vector2,M=new THREE.Vector2,b=new THREE.Vector3,T=new THREE.Vector3,O=new THREE.Vector2,I=new THREE.Vector2,S=new THREE.Vector2,P=0,x=0,j=1,R=new THREE.Vector3,C=new THREE.Vector3,D=new THREE.Quaternion,H=!1,z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},U=z.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var V=(new THREE.Quaternion).setFromUnitVectors(t.up,new THREE.Vector3(0,1,0)),B=V.clone().inverse(),k={type:"change"},G={type:"start"},W={type:"end"};this.setLastQuaternion=function(t){D.copy(t),g.object.quaternion.copy(t)},this.getLastPosition=function(){return C},this.rotateLeft=function(t){void 0===t&&(t=n()),x-=t},this.rotateUp=function(t){void 0===t&&(t=n()),P-=t},this.panLeft=function(t){var e=this.object.matrix.elements;b.set(e[0],e[1],e[2]),b.multiplyScalar(-t),R.add(b)},this.panUp=function(t){var e=this.object.matrix.elements;b.set(e[4],e[5],e[6]),b.multiplyScalar(t),R.add(b)},this.pan=function(t,e){var n=g.domElement===document?g.domElement.body:g.domElement;if(g.object instanceof THREE.PerspectiveCamera){var i=g.object.position,o=i.clone().sub(g.target),r=o.length();r*=Math.tan(g.object.fov/2*Math.PI/180),g.panLeft(2*t*r/n.clientHeight),g.panUp(2*e*r/n.clientHeight)}else g.object instanceof THREE.OrthographicCamera&&(g.panLeft(t*(g.object.right-g.object.left)/n.clientWidth),g.panUp(e*(g.object.top-g.object.bottom)/n.clientHeight))},this.momentum=function(){if(H){if(Math.abs(E+f)<1e-4)return void(H=!1);E*=this.momentumDampingFactor,f*=this.momentumDampingFactor,x-=this.momentumScalingFactor*f,P-=this.momentumScalingFactor*E}},this.dollyIn=function(t){void 0===t&&(t=i()),g.object instanceof THREE.PerspectiveCamera?j/=t:g.object instanceof THREE.OrthographicCamera&&(g.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),g.object.updateProjectionMatrix(),g.dispatchEvent(k))},this.dollyOut=function(t){void 0===t&&(t=i()),g.object instanceof THREE.PerspectiveCamera?j*=t:g.object instanceof THREE.OrthographicCamera&&(g.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),g.object.updateProjectionMatrix(),g.dispatchEvent(k))},this.update=function(){var t=this.object.position;T.copy(t).sub(this.target),T.applyQuaternion(V),d=Math.atan2(T.x,T.z),p=Math.atan2(Math.sqrt(T.x*T.x+T.z*T.z),T.y),this.autoRotate&&U===z.NONE&&this.rotateLeft(n()),this.momentum(),d+=x,p+=P,d=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,d)),p=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,p)),p=Math.max(y,Math.min(Math.PI-y,p));var e=T.length()*j;e=Math.max(this.minDistance,Math.min(this.maxDistance,e)),this.target.add(R),T.x=e*Math.sin(p)*Math.sin(d),T.y=e*Math.cos(p),T.z=e*Math.sin(p)*Math.cos(d),T.applyQuaternion(B),t.copy(this.target).add(T),this.object.lookAt(this.target),x=0,P=0,j=1,R.set(0,0,0),(C.distanceToSquared(this.object.position)>y||8*(1-D.dot(this.object.quaternion))>y)&&(this.dispatchEvent(k),C.copy(this.object.position),D.copy(this.object.quaternion))},this.reset=function(){U=z.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(k),this.update()},this.getPolarAngle=function(){return p},this.getAzimuthalAngle=function(){return d},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mousewheel",s,!1),this.domElement.addEventListener("DOMMouseScroll",s,!1),this.domElement.addEventListener("touchstart",c,!1),this.domElement.addEventListener("touchend",l,!1),this.domElement.addEventListener("touchmove",u,!1),window.addEventListener("keydown",h,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;var GSVPANO=GSVPANO||{};GSVPANO.PanoLoader=function(t){"use strict";var e,n,i=t||{},o=new google.maps.StreetViewService,r=0,a=0,s=[],h=[],c=0,u=0,l="",d=[1,2,4,7,13,26],p=[1,1,2,4,7,13],f=[416,832,1664,3328,6656,13312],E=[416,416,832,1664,3328,6656],m=null;try{var g=document.createElement("canvas");m=g.getContext("experimental-webgl"),null==m&&(m=g.getContext("webgl"))}catch(y){}var A=1024,v=1024;if(m){var w=Math.max(m.getParameter(m.MAX_TEXTURE_SIZE),6656);A=v=w}this.setProgress=function(t,e){this.onProgress&&this.onProgress({loaded:t,total:e})},this.throwError=function(t){this.onError&&this.onError(t)},this.adaptTextureToZoom=function(){var t=416*d[e],n=416*p[e];t=f[e],n=E[e],c=Math.ceil(t/A),u=Math.ceil(n/v),s=[],h=[];for(var i=0,o=0;u>o;o++)for(var r=0;c>r;r++){var a=document.createElement("canvas");c-1>r?a.width=A:a.width=t-A*r,u-1>o?a.height=v:a.height=n-v*o,s.push(a),h.push(a.getContext("2d")),i++}},this.composeFromTile=function(t,e,n){t*=512,e*=512;var i=Math.floor(t/A),o=Math.floor(e/v);t-=i*A,e-=o*v,h[o*c+i].drawImage(n,0,0,n.width,n.height,t,e,512,512),this.progress()},this.progress=function(){r++;Math.round(100*r/a);this.setProgress(r,a),r===a&&(this.canvas=s,this.panoId=n,this.zoom=e,this.onPanoramaLoad&&this.onPanoramaLoad(s[0]))},this.loadFromId=function(t){n=t,this.composePanorama()},this.composePanorama=function(){this.setProgress(0,1);var t,o,s,h=d[e],c=p[e],u=this;r=0,a=h*c;for(var u=this,s=0;c>s;s++)for(var o=0;h>o;o++){var t="https://cbks0.googleapis.com/cbk?output=tile&cb_client=maps_photos.ugc&v=4&gl=US&zoom="+e+"&x="+o+"&y="+s+"&panoid="+n;!function(e,n){if(i.useWebGL)var o=THREE.ImageUtils.loadTexture(t,null,function(){u.composeFromTile(e,n,o)});else{var r=new Image;r.addEventListener("load",function(){u.composeFromTile(e,n,this)}),r.crossOrigin="",r.src=t}}(o,s)}},this.load=function(t){var e=this;e.loadPano(t)},this.loadPano=function(t){var e=this;o.getPanoramaById(t,function(t,i){i===google.maps.StreetViewStatus.OK?(e.result=t,e.onPanoramaData&&e.onPanoramaData(t),l=t.copyright,e.copyright=t.copyright,n=t.location.pano,e.location=location,e.composePanorama()):(e.onNoPanoramaData&&e.onNoPanoramaData(i),e.throwError("Could not retrieve panorama for the following reason: "+i))})},this.setZoom=function(t){e=t,this.adaptTextureToZoom()},this.setZoom(i.zoom||1)},THREE.BendModifier=function(){},THREE.BendModifier.prototype={constructor:THREE.BendModifier,set:function(t,e,n){return this.direction=new THREE.Vector3,this.direction.copy(t),this.axis=new THREE.Vector3,this.axis.copy(e),this.angle=n,this},_sign:function(t){return 0>t?-1:t>0?1:0},_cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},_sinhInverse:function(t){return Math.log(Math.abs(t)+Math.sqrt(t*t+1))},modify:function(t){var e=new THREE.Vector3;e.crossVectors(this.direction,this.axis);var n=new THREE.Matrix4;n.set(e.x,e.y,e.z,0,this.direction.x,this.direction.y,this.direction.z,0,this.axis.x,this.axis.y,this.axis.z,0,0,0,0,1).transpose();for(var i=(new THREE.Matrix3).getInverse(n),o=[],r=[],a=[],s=0,h=0,c=0,u=0,l=0;l<t.vertices.length;l++)o[l]=new THREE.Vector3,o[l].copy(t.vertices[l]).applyMatrix3(i),o[l].x>s&&(s=o[l].x),o[l].x<h&&(h=o[l].x),o[l].y>c&&(c=o[l].y),o[l].y<u&&(u=o[l].y);for(var d=s-h,p=c-u,f=2*this._sinhInverse(Math.tan(this.angle))/d,E=(s+h)/2,m=(c+u)/2,l=0;l<t.vertices.length;l++)r[l]=new THREE.Vector3,r[l].copy(o[l]),o[l].x=1*this._sign(o[l].x-E)/f*this._sinhInverse((o[l].x-E)*f);var g=2/f*this._sinhInverse(d/2*f),y=2*this._sinhInverse(Math.tan(this.angle))/g,A=new THREE.Vector3(g/2,-p/2,0);A.y=1/y*this._cosh(y*A.x)-1/y-p/2;for(var v=new THREE.Vector3(0,A.y+A.x/Math.tan(this.angle),0),l=0;l<t.vertices.length;l++){var w=1*this._sign(r[l].x-E)/f*this._sinhInverse((r[l].x-E)*f),N=1/y*this._cosh(y*w)-1/y,L=new THREE.Vector3(v.x-w,v.y-(N-p/2),v.z).normalize(),M=new THREE.Vector3;M.addVectors(new THREE.Vector3(w,N-p/2,r[l].z),L.multiplyScalar(r[l].y+p/2)),o[l].x=M.x,o[l].y=M.y}for(var b=E*g/d,l=0;l<t.vertices.length;l++){var T=new THREE.Vector3(E,m,r[l].z),O=new THREE.Vector3;O.subVectors(r[l],T);var I=new THREE.Vector3;I.subVectors(o[l],T),a[l]=Math.acos(1/this._cosh(f*o[l].x))*this._sign(o[l].x),o[l].x=o[l].x+b,t.vertices[l].copy(o[l].applyMatrix4(n))}t.computeFaceNormals(),t.verticesNeedUpdate=!0,t.normalsNeedUpdate=!0;for(var S=["a","b","c","d"],P=0,x=t.faces.length;x>P;P++){var j=t.faces[P];if(void 0!==j.vertexNormals)for(var R=0,C=j.vertexNormals.length;C>R;R++){var D=a[j[S[R]]],H=this.axis.x,z=this.axis.y,U=this.axis.z,V=new THREE.Matrix3;V.set(Math.cos(D)+(1-Math.cos(D))*H*H,(1-Math.cos(D))*H*z-Math.sin(D)*U,(1-Math.cos(D))*H*U+Math.sin(D)*z,(1-Math.cos(D))*z*H+Math.sin(D)*U,Math.cos(D)+(1-Math.cos(D))*z*z,(1-Math.cos(D))*z*U-Math.sin(D)*H,(1-Math.cos(D))*U*H-Math.sin(D)*z,(1-Math.cos(D))*U*z+Math.sin(D)*H,Math.cos(D)+(1-Math.cos(D))*U*U),j.vertexNormals[R].applyMatrix3(V)}}return this}},window.PANOLENS={Utils:{loadBMFont:function(){},textureLoader:function(){}}},function(){"use strict";PANOLENS.DataImage={Info:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEzLDlIMTFWN0gxM00xMywxN0gxMVYxMUgxM00xMiwyQTEwLDEwIDAgMCwwIDIsMTJBMTAsMTAgMCAwLDAgMTIsMjJBMTAsMTAgMCAwLDAgMjIsMTJBMTAsMTAgMCAwLDAgMTIsMloiIC8+PC9zdmc+",Arrow:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEyLDIyQTEwLDEwIDAgMCwxIDIsMTJBMTAsMTAgMCAwLDEgMTIsMkExMCwxMCAwIDAsMSAyMiwxMkExMCwxMCAwIDAsMSAxMiwyMk0xMiw3TDcsMTJIMTBWMTZIMTRWMTJIMTdMMTIsN1oiIC8+PC9zdmc+",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",Orbit:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDYwIDYwIiBoZWlnaHQ9IjY0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2MCA2MCIgd2lkdGg9IjY0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGZpbGw9IiNmZmYiPjxnPjxnPjxwb2x5Z29uIHBvaW50cz0iNTYsMjUgNTMuNDM5LDI1IDU2LjY0MSwyOSA1MCwyOSA1MCwzMSA1Ni42MzksMzEgNTMuNDM5LDM1IDU2LDM1IDYwLDI5Ljk5OSAgICAiLz48cG9seWdvbiBwb2ludHM9IjQsMzUgNi41NjEsMzUgMy4zNTksMzEgMTAsMzEgMTAsMjkgMy4zNjEsMjkgNi41NjEsMjUgNCwyNSAwLDMwLjAwMSAgICAiLz48cG9seWdvbiBwb2ludHM9IjM1LDU2IDM1LDUzLjQzOCAzMSw1Ni42NCAzMSw1MCAyOSw1MCAyOSw1Ni42MzkgMjUsNTMuNDM4IDI1LDU2IDMwLjAwMiw2MCAgICAiLz48cG9seWdvbiBwb2ludHM9IjI1LDQgMjUsNi41NjIgMjksMy4zNTkgMjksMTAgMzEsMTAgMzEsMy4zNiAzNSw2LjU2MiAzNSw0IDI5Ljk5OCwwICAgICIvPjxnPjxwYXRoIGQ9Ik0zOC4wOTgsNDAuMTUyQzM3LjkyNCwyOC4xNjIsMzUuOTgyLDIzLDMwLDIzcy03LjkyNCw1LjE2Mi04LjA5OCwxNy4xNTJDMTguOTIsMzcuNzY5LDE3LDM0LjEwNiwxNywzMCAgICAgIGMwLTcuMTY5LDUuODMtMTMsMTMtMTNzMTMsNS44MzEsMTMsMTNDNDMsMzQuMTA2LDQxLjA4LDM3Ljc2OSwzOC4wOTgsNDAuMTUyIE0yOS45OCwzNC45ODhjLTYuMDE2LDAtNS4xMjctNy4zMS01LjEyNy03LjMxICAgICAgczEuMDI3LTIuMzE2LDUuMTI3LTIuMzE2YzQuMTAyLDAsNS4xNywyLjMxNiw1LjE3LDIuMzE2UzM1Ljk5NiwzNC45ODgsMjkuOTgsMzQuOTg4IE0zMCwxNWMtOC4yNzEsMC0xNSw2LjcyOS0xNSwxNSAgICAgIGMwLDguMjcxLDYuNzI5LDE1LDE1LDE1czE1LTYuNzI5LDE1LTE1QzQ1LDIxLjcyOSwzOC4yNzEsMTUsMzAsMTUiLz48L2c+PC9nPjwvZz48L3N2Zz4=",Gyro:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNjRweCIgaGVpZ2h0PSI2NHB4IiB2aWV3Qm94PSIxMjAgMTIwIDI2MCAyNjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUwMCA1MDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xOTUuNiwyNjAuMWMxLjksMi43LDUuMSw0LjYsOC42LDQuNmM0LjQsMCw4LjctMy40LDguNy04LjRjMC00LjgtNC04LjUtOS4xLTguNWMtMS45LDAtMy44LDAuNS01LjYsMS4zDQoJCQl2LTUuM2w4LjctMTAuM2gtMTUuNXYtOGgyOC4ydjUuM2wtOC40LDEwLjNjNi40LDIuNSwxMC43LDgsMTAuNywxNWMwLDkuOC03LjcsMTYuNC0xNy4zLDE2LjRjLTUuOCwwLTExLjMtMi42LTE1LjQtNy4yDQoJCQlMMTk1LjYsMjYwLjF6Ii8+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTMuOSwyMjUuNmwtOC43LDE0LjhoMC42YzguOCwwLDE2LjIsNi43LDE2LjIsMTZjMCw5LTcuNSwxNi4zLTE2LjUsMTYuM2MtOC43LDAtMTctNi4yLTE3LTE1LjgNCgkJCWMwLTQuNiwyLjEtOC43LDQuNi0xMi44bDEwLjktMTguNEgyNTMuOXogTTIzNy4xLDI1Ni44YzAsNC40LDMuNyw3LjksOC4yLDcuOWM0LjYsMCw3LjgtMy42LDcuOC04LjFjMC00LjQtMy4zLTguMy04LjMtOC4zDQoJCQljLTEuNywwLTMuMiwwLjMtNSwxLjFDMjM4LjcsMjUxLjIsMjM3LjEsMjUzLjcsMjM3LjEsMjU2Ljh6Ii8+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yODQuNiwyMjVjMTEuOSwwLDE2LjIsMTAuNywxNi4yLDIzLjljMCwxMy4yLTQuNCwyMy45LTE2LjIsMjMuOWMtMTEuOSwwLTE2LjItMTAuNy0xNi4yLTIzLjkNCgkJCUMyNjguMywyMzUuNiwyNzIuNywyMjUsMjg0LjYsMjI1eiBNMjg0LjYsMjMyLjljLTUuNCwwLTcuMyw3LjItNy4zLDE1LjljMCw4LjcsMS45LDE1LjksNy4zLDE1LjljNS40LDAsNy4zLTcuMiw3LjMtMTUuOQ0KCQkJQzI5MS44LDI0MC4xLDI4OS45LDIzMi45LDI4NC42LDIzMi45eiIvPg0KCQk8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMzE2LjQsMjIxLjZjNCwwLDcuMywzLjIsNy4zLDcuM2MwLDQtMy4yLDcuMy03LjMsNy4zYy00LDAtNy4zLTMuMi03LjMtNy4zDQoJCQlDMzA5LjEsMjI0LjksMzEyLjMsMjIxLjYsMzE2LjQsMjIxLjZ6IE0zMTYuNCwyMzAuOWMxLjEsMCwyLTAuOSwyLTJjMC0xLjEtMC45LTItMi0yYy0xLjEsMC0yLDAuOS0yLDINCgkJCUMzMTQuNCwyMzAuMSwzMTUuMywyMzAuOSwzMTYuNCwyMzAuOXoiLz4NCgk8L2c+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTAuNSwzNzYuNWMtNzAsMC0xMjctNTctMTI3LTEyN3M1Ny0xMjcsMTI3LTEyN2MyOC44LDAsNTYsOS40LDc4LjYsMjcuMmwtNy43LDkuOA0KCQkJYy0yMC40LTE2LTQ0LjktMjQuNS03MC44LTI0LjVDMTg3LjMsMTM1LDEzNiwxODYuMywxMzYsMjQ5LjVTMTg3LjMsMzY0LDI1MC41LDM2NGM2My4yLDAsMTE0LjUtNTEuNCwxMTQuNS0xMTQuNQ0KCQkJYzAtMjYuNy05LjQtNTIuNy0yNi41LTczLjNsOS42LThjMTguOSwyMi43LDI5LjQsNTEuNiwyOS40LDgxLjJDMzc3LjUsMzE5LjUsMzIwLjUsMzc2LjUsMjUwLjUsMzc2LjV6Ii8+DQoJCTxwb2x5Z29uIGZpbGw9IiNmZmYiIHBvaW50cz0iMzMxLjgsMTYwLjEgMzM1LjgsMTk4LjggMzY5LjcsMTcyLjYgCQkiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",Cardboard:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg=="
}}(),function(){"use strict";PANOLENS.Modes={UNKNOWN:0,NORMAL:1,VR:2}}(),function(){"use strict";var t=new THREE.TextureLoader;t.crossOrigin="",PANOLENS.Utils.TextureLoader=t}(),function(){"use strict";PANOLENS.Panorama=function(t,e){THREE.Mesh.call(this),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=500,this.defaultInfospotSize=350,this.loaded=!1,this.linkedSpots=[],this.isChildrenVisible=!1,this.linkingImageURL=void 0,this.linkingImageScale=void 0,this.geometry=t,this.material=e,this.material.side=THREE.DoubleSide,this.material.visible=!1,this.scale.x*=-1,this.orbitRadius=t.parameter&&t.parameter.radius?t.parameter.radius:100,this.addEventListener("load",this.fadeIn.bind(this))},PANOLENS.Panorama.prototype=Object.create(THREE.Mesh.prototype),PANOLENS.Panorama.prototype.constructor=PANOLENS.Panorama,PANOLENS.Panorama.prototype.add=function(t){var e;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}t instanceof PANOLENS.Infospot?e=t:(e=new THREE.Object3D,e.scale.x=-1,e.add(t)),THREE.Object3D.prototype.add.call(this,e)},PANOLENS.Panorama.prototype.load=function(){this.onLoad()},PANOLENS.Panorama.prototype.onLoad=function(){this.toggleChildrenVisibility(!0),this.loaded=!0,this.dispatchEvent({type:"load"})},PANOLENS.Panorama.prototype.onProgress=function(t){this.dispatchEvent({type:"progress",progress:t})},PANOLENS.Panorama.prototype.onError=function(){this.dispatchEvent({type:"error"})},PANOLENS.Panorama.prototype.getZoomLevel=function(){var t;return t=window.innerWidth<=800?this.ImageQualityFair:window.innerWidth>800&&window.innerWidth<=1280?this.ImageQualityMedium:window.innerWidth>1280&&window.innerWidth<=1920?this.ImageQualityHigh:window.innerWidth>1920?this.ImageQualitySuperHigh:this.ImageQualityLow},PANOLENS.Panorama.prototype.updatePanoObjectTexture=function(t){this.material.map=t,this.material.needsUpdate=!0},PANOLENS.Panorama.prototype.toggleChildrenVisibility=function(t,e){e=void 0!==e?e:0;var n=void 0!==t?t:this.isChildrenVisible?!1:!0;this.traverse(function(t){t instanceof PANOLENS.Infospot&&(n?t.show(e):t.hide(e))}),this.isChildrenVisible=n},PANOLENS.Panorama.prototype.setLinkingImage=function(t,e){this.linkingImageURL=t,this.linkingImageScale=e},PANOLENS.Panorama.prototype.link=function(t,e){var n,i,o,r,a=this;this.visible=!0,i=new THREE.Raycaster,i.set(this.position,t.position.clone().sub(this.position).normalize()),o=i.intersectObject(this),o.length>0&&(r=o[o.length-1].point.clone().multiplyScalar(.99),n=new PANOLENS.Infospot(void 0!==t.linkingImageScale?t.linkingImageScale:this.defaultInfospotSize,void 0!==t.linkingImageURL?t.linkingImageURL:PANOLENS.DataImage.Arrow),n.position.copy(r),n.toPanorama=t,n.addEventListener("click",function(){a.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:t})}),this.linkedSpots.push(n),this.add(n),this.visible=!1,e||t.link(this,!0))},PANOLENS.Panorama.prototype.reset=function(){this.children.length=0},PANOLENS.Panorama.prototype.fadeIn=function(){new TWEEN.Tween(this.material).to({opacity:1},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).start()},PANOLENS.Panorama.prototype.fadeOut=function(){new TWEEN.Tween(this.material).to({opacity:0},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).start()},PANOLENS.Panorama.prototype.onEnter=function(){new TWEEN.Tween(this).to({},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).onStart(function(){this.dispatchEvent({type:"enter-start"}),this.loaded?(this.fadeIn(),this.toggleChildrenVisibility(!0,this.animationDuration)):this.load(),this.visible=!0,this.material.visible=!0}).delay(this.animationDuration).start(),this.dispatchEvent({type:"enter"})},PANOLENS.Panorama.prototype.onLeave=function(){new TWEEN.Tween(this).to({},this.animationDuration).easing(TWEEN.Easing.Quartic.Out).onStart(function(){this.fadeOut(),this.toggleChildrenVisibility(!1)}).onComplete(function(){this.visible=!1,this.material.visible=!0}).start(),this.dispatchEvent({type:"leave"})}}(),function(){"use strict";PANOLENS.ImagePanorama=function(t,e){e=e||5e3;var n=new THREE.SphereGeometry(e,60,40),i=new THREE.MeshBasicMaterial({opacity:0,transparent:!0});PANOLENS.Panorama.call(this,n,i),this.src=t},PANOLENS.ImagePanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.ImagePanorama.prototype.constructor=PANOLENS.ImagePanorama,PANOLENS.ImagePanorama.prototype.load=function(t){t=t||this.src,t&&("string"==typeof t?PANOLENS.Utils.TextureLoader.load(t,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):t instanceof HTMLImageElement&&this.onLoad(new THREE.Texture(t)))},PANOLENS.ImagePanorama.prototype.onLoad=function(t){t.minFilter=t.maxFilter=THREE.LinearFilter,t.needsUpdate=!0,this.updatePanoObjectTexture(t),PANOLENS.Panorama.prototype.onLoad.call(this)},PANOLENS.ImagePanorama.prototype.reset=function(){PANOLENS.Panorama.prototype.reset.call(this)}}(),function(){"use strict";PANOLENS.GoogleStreetviewPanorama=function(t,e){PANOLENS.ImagePanorama.call(this,void 0,e),this.panoId=t,this.gsvLoader=void 0,this.setupGoogleMapAPI()},PANOLENS.GoogleStreetviewPanorama.prototype=Object.create(PANOLENS.ImagePanorama.prototype),PANOLENS.GoogleStreetviewPanorama.constructor=PANOLENS.GoogleStreetviewPanorama,PANOLENS.GoogleStreetviewPanorama.prototype.load=function(t){t=t||this.panoId||{},t&&this.gsvLoader?this.loadGSVLoader(t):this.gsvLoader={}},PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI=function(){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js",t.onreadystatechange=this.setGSVLoader.bind(this),t.onload=this.setGSVLoader.bind(this),document.getElementsByTagName("head")[0].appendChild(t)},PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader=function(){this.gsvLoader=new GSVPANO.PanoLoader,this.gsvLoader==={}&&this.load()},PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader=function(){return this.gsvLoader},PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader=function(t){this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(t),this.gsvLoader.loaded=!0},PANOLENS.GoogleStreetviewPanorama.prototype.onLoad=function(t){this.gsvLoader&&PANOLENS.ImagePanorama.prototype.onLoad.call(this,new THREE.Texture(t))},PANOLENS.GoogleStreetviewPanorama.prototype.reset=function(){this.gsvLoader=void 0,PANOLENS.ImagePanorama.prototype.reset.call(this)}}(),function(){"use strict";PANOLENS.CubePanorama=function(t,e){var n,i;e=e||1e4,n=JSON.parse(JSON.stringify(THREE.ShaderLib.cube)),n.uniforms.tCube.value=(new THREE.CubeTextureLoader).load(t),i=new THREE.ShaderMaterial({fragmentShader:n.fragmentShader,vertexShader:n.vertexShader,uniforms:n.uniforms,side:THREE.BackSide}),PANOLENS.Panorama.call(this,new THREE.BoxGeometry(e,e,e),i),this.orbitRadius=e/2,this.images=t||[]},PANOLENS.CubePanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.CubePanorama.prototype.constructor=PANOLENS.CubePanorama,PANOLENS.CubePanorama.prototype.onLoad=function(){PANOLENS.Panorama.prototype.onLoad.call(this)}}(),function(){"use strict";PANOLENS.BasicPanorama=function(){var t=PANOLENS.DataImage.WhiteTile;PANOLENS.CubePanorama.call(this,[t,t,t,t,t,t])},PANOLENS.BasicPanorama.prototype=Object.create(PANOLENS.CubePanorama.prototype),PANOLENS.BasicPanorama.prototype.constructor=PANOLENS.BasicPanorama}(),function(){"use strict";PANOLENS.VideoPanorama=function(t,e,n){n=n||5e3;var i=new THREE.SphereGeometry(n,60,40),o=new THREE.MeshBasicMaterial({opacity:0,transparent:!0});PANOLENS.Panorama.call(this,i,o),this.src=t,this.options=e,this.videoElement=void 0,this.videoCanvas=void 0,this.videoRenderObject=void 0,this.videoFramerate=30,this.isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent),this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("leave",this.resetVideo.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))},PANOLENS.VideoPanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.VideoPanorama.constructor=PANOLENS.VideoPanorama,PANOLENS.VideoPanorama.prototype.load=function(t,e){var n=this;t=t||this.src||"",e=e||this.options||{},this.videoElement=e.videoElement||document.createElement("video"),this.videoCanvas=e.videoCanvas||document.createElement("canvas"),this.videoElement.muted=e.muted||!1,this.videoElement.loop=void 0!==e.loop?e.loop:!0,this.videoElement.src=t,this.videoElement.load(),this.videoElement.onloadeddata=function(){n.setVideoTexture(n.videoElement,n.videoCanvas),n.onLoad()},this.videoElement.ontimeupdate=function(t){n.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.currentTime/this.duration})}},PANOLENS.VideoPanorama.prototype.setVideoTexture=function(t,e){var n,i,o,r;t&&e&&(e.width=t.videoWidth,e.height=t.videoHeight,o=e.getContext("2d"),n=new THREE.Texture(e),n.minFilter=THREE.LinearFilter,n.maxFilter=THREE.LinearFilter,i={video:t,videoContext:o,videoTexture:n,target:this},this.isIOS?(i.fps=this.videoFramerate,i.lastTime=Date.now(),i.video.pano_paused=!0,i.video.play=function(){i.lastTime=Date.now(),this.pano_paused=!1},i.video.pause=function(){this.pano_paused=!0},r=function(){if(!this.video.pano_paused){var t=Date.now(),e=(t-this.lastTime)/1e3;this.video&&e>=1e3/this.fps/1e3&&(this.video.currentTime+e>=this.video.duration?this.video.currentTime=0:this.video.currentTime=this.video.currentTime+e,this.videoContext.drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight),this.videoTexture.needsUpdate=!0,this.lastTime=t)}}):r=function(){this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.videoContext.drawImage(this.video,0,0),this.videoTexture&&(this.videoTexture.needsUpdate=!0))},o.drawImage(t,0,0),n.needsUpdate=!0,this.updatePanoObjectTexture(n),this.videoRenderObject=i,this.dispatchEvent({type:"panolens-viewer-handler",method:"addUpdateCallback",data:r.bind(i)}))},PANOLENS.VideoPanorama.prototype.reset=function(){this.videoElement=void 0,this.videoCanvas=void 0,PANOLENS.Panorama.prototype.reset.call(this)},PANOLENS.VideoPanorama.prototype.isVideoPaused=function(){return this.isIOS?this.videoRenderObject.video.pano_paused:this.videoRenderObject.video.paused},PANOLENS.VideoPanorama.prototype.toggleVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&(this.isVideoPaused()?this.videoRenderObject.video.play():this.videoRenderObject.video.pause())},PANOLENS.VideoPanorama.prototype.setVideoCurrentTime=function(t){this.videoRenderObject&&this.videoRenderObject.video&&1!==t.percentage&&(this.videoRenderObject.video.currentTime=this.videoRenderObject.video.duration*t.percentage)},PANOLENS.VideoPanorama.prototype.playVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&this.isVideoPaused()&&this.videoRenderObject.video.play()},PANOLENS.VideoPanorama.prototype.pauseVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&!this.isVideoPaused()&&this.videoRenderObject.video.pause()},PANOLENS.VideoPanorama.prototype.resetVideo=function(){this.videoRenderObject&&this.videoRenderObject.video&&this.setVideoCurrentTime({percentage:0})}}(),function(){"use strict";PANOLENS.EmptyPanorama=function(t){t=t||5e3;var e=new THREE.Geometry,n=new THREE.MeshBasicMaterial({color:0,opacity:1,transparent:!0});PANOLENS.Panorama.call(this,e,n)},PANOLENS.EmptyPanorama.prototype=Object.create(PANOLENS.Panorama.prototype),PANOLENS.EmptyPanorama.prototype.constructor=PANOLENS.EmptyPanorama}(),function(){PANOLENS.Tile=function(t,e,n,i,o,r,a){this.parameters={width:t,height:e,widthSegments:n,heightSegments:i,forceDirection:o,forceAxis:r,forceAngle:a},t=t||10,e=e||5,n=n||1,i=i||1,o=o||new THREE.Vector3(0,0,1),r=r||new THREE.Vector3(0,1,0),a=void 0!==a?a:0,THREE.Mesh.call(this,new THREE.PlaneGeometry(t,e,n,i),new THREE.MeshBasicMaterial({color:16777215,transparent:!0})),this.entity=void 0,this.animationDuration=500,this.animationFadeOut=void 0,this.animationFadeIn=void 0,this.animationTranslation=void 0,this.tweens={},0!==a&&this.bend(o,r,a)},PANOLENS.Tile.prototype=Object.create(THREE.Mesh.prototype),PANOLENS.Tile.prototype.constructor=PANOLENS.Tile,PANOLENS.Tile.prototype.clone=function(){var t,e=this.parameters;return t=new PANOLENS.Tile(e.width,e.height,e.widthSegments,e.heightSegments,e.forceDirection,e.forceAxis,e.forceAngle),t.setEntity(this.entity),t.material=this.material.clone(),t},PANOLENS.Tile.prototype.setEntity=function(t){this.entity=t},PANOLENS.Tile.prototype.bend=function(t,e,n){var i=new THREE.BendModifier;i.set(t,e,n).modify(this.geometry)},PANOLENS.Tile.prototype.tween=function(t,e,n,i,o,r,a,s,h){return e=e||this,n=n||{},i=i||this.animationDuration,o=o||TWEEN.Easing.Exponential.Out,r=void 0!==r?r:0,a=a?a:null,s=s?s:null,h=h?h:null,this.tweens[t]||(this.tweens[t]=new TWEEN.Tween(e).to(n,i).easing(o).delay(r).onStart(a).onUpdate(s).onComplete(h)),this.tweens[t]},PANOLENS.Tile.prototype.ripple=function(t,e,n){t=t||2,e=e||200,n=n||TWEEN.Easing.Cubic.Out;var i=this,o=this.clone();new TWEEN.Tween(o.scale).to({x:t,y:t},e).easing(n).start(),new TWEEN.Tween(o.material).to({opacity:0},e).easing(n).onComplete(function(){i.remove(o),o.geometry.dispose(),o.material.dispose()}).start(),this.add(o)}}(),function(){"use strict";PANOLENS.TileGroup=function(t,e,n,i,o){var r=this;THREE.Object3D.call(this),this.tileArray=t||[],this.offset=void 0!==o?o:0,this.v_gap=void 0!==e?e:6,this.d_gap=void 0!==n?n:2,this.animationDuration=void 0!==i?i:200,this.animationEasing=TWEEN.Easing.Exponential.Out,this.visibleDelta=2,this.tileArray.map(function(t,e){t.image&&PANOLENS.Utils.TextureLoader.load(t.image,r.setTexture.bind(t)),t.position.set(0,e*-r.v_gap,e*-r.d_gap),t.originalPosition=t.position.clone(),t.setEntity(r),r.add(t)}),this.updateVisbility()},PANOLENS.TileGroup.prototype=Object.create(THREE.Object3D.prototype),PANOLENS.TileGroup.prototype.constructor=PANOLENS.TileGroup,PANOLENS.TileGroup.prototype.updateTexture=function(t){var e=this;t=t||[],this.children.map(function(n,i){n instanceof PANOLENS.Tile&&t[i]&&(PANOLENS.Utils.TextureLoader.load(t[i],e.setTexture.bind(n)),n.outline&&(n.outline.material.visible=!0))})},PANOLENS.TileGroup.prototype.updateAllTexture=function(t){if(this.updateTexture(t),t.length<this.children.length)for(var e=t.length;e<this.children.length;e++)this.children[e]instanceof PANOLENS.Tile&&(this.children[e].material.visible=!1,this.children[e].outline&&(this.children[e].outline.material.visible=!1))},PANOLENS.TileGroup.prototype.setTexture=function(t){t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter,this.material.visible=!0,this.material.map=t,this.material.needsUpdate=!0},PANOLENS.TileGroup.prototype.updateVisbility=function(){this.children[this.offset].visible=!0,new TWEEN.Tween(this.children[this.offset].material).to({opacity:1},this.animationDuration).easing(this.animationEasing).start(),this.children[this.offset].outline&&(this.children[this.offset].outline.visible=!0);for(var t=this.offset-1;t>=0;t--)-1!==this.tileArray.indexOf(this.children[t])&&(this.offset-t<=this.visibleDelta?(this.children[t].visible=!0,new TWEEN.Tween(this.children[t].material).to({opacity:1/(this.offset-t)*.5},this.animationDuration).easing(this.animationEasing).start()):this.children[t].visible=!1,this.children[t].outline&&(this.children[t].outline.visible=!1));for(var t=this.offset+1;t<this.children.length;t++)-1!==this.tileArray.indexOf(this.children[t])&&(t-this.offset<=this.visibleDelta?(this.children[t].visible=!0,new TWEEN.Tween(this.children[t].material).to({opacity:1/(t-this.offset)*.5},this.animationDuration).easing(this.animationEasing).start()):this.children[t].visible=!1,this.children[t].outline&&(this.children[t].outline.visible=!1))},PANOLENS.TileGroup.prototype.scrollUp=function(t){var e,n=this.tileArray;if(t=void 0!==t?t:this.animationDuration,e=this.offset+1,this.offset<n.length-1&&n[this.offset+1].material.visible){for(var i=n.length-1;i>=0;i--)new TWEEN.Tween(n[i].position).to({y:(i-e)*-this.v_gap,z:Math.abs(i-e)*-this.d_gap},t).easing(this.animationEasing).start();this.offset++,this.updateVisbility(),this.dispatchEvent({type:"scroll",direction:"up"})}},PANOLENS.TileGroup.prototype.scrollDown=function(t){var e,n=this.tileArray;if(t=void 0!==t?t:this.animationDuration,e=this.offset-1,this.offset>0&&n[this.offset-1].material.visible){for(var i=0;i<n.length;i++)new TWEEN.Tween(n[i].position).to({y:(i-e)*-this.v_gap,z:Math.abs(i-e)*-this.d_gap},t).easing(this.animationEasing).start();this.offset--,this.updateVisbility(),this.dispatchEvent({type:"scroll",direction:"down"})}},PANOLENS.TileGroup.prototype.reset=function(){this.tileArray.map(function(t,e){t.position.copy(t.originalPosition)}),this.offset=0,this.updateVisbility()},PANOLENS.TileGroup.prototype.getIndex=function(){return this.offset},PANOLENS.TileGroup.prototype.getTileCount=function(){var t=0;return this.tileArray.map(function(e){e.material.visible&&t++}),t}}(),function(){"use strict";var t,e,n=[];PANOLENS.SpriteText=function(t,e,n,i,o){THREE.Object3D.call(this),this.text=t||"",this.maxWidth=e||2e3,this.color=n||16777215,this.opacity=void 0!==i?i:1,this.options=o||{},this.animationDuration=500,this.animationFadeOut=void 0,this.animationFadeIn=void 0,this.tweens={},this.addText(t)},PANOLENS.SpriteText.prototype=Object.create(THREE.Object3D.prototype),PANOLENS.SpriteText.prototype.constructor=PANOLENS.SpriteText,PANOLENS.SpriteText.prototype.generateTextGeometry=function(){},PANOLENS.SpriteText.prototype.generateSDFShader=function(){},PANOLENS.SpriteText.prototype.setBMFont=function(i,o,r){r.needsUpdate=!0,r.minFilter=THREE.LinearMipMapLinearFilter,r.magFilter=THREE.LinearFilter,r.generateMipmaps=!0,r.anisotropy=16,t=o,e=r;for(var a=n.length-1;a>=0;a--)n[a].target.addText(n[a].text);for(;n.length>0;)n.pop();i&&i()},PANOLENS.SpriteText.prototype.addText=function(i){if(!t||!e)return void n.push({target:this,text:i});var o=new THREE.Object3D;this.options.text=i,this.options.font=t,this.options.width=this.maxWidth;var r=this.generateTextGeometry(this.options);r.computeBoundingBox(),r.computeBoundingSphere();var a=new THREE.RawShaderMaterial(this.generateSDFShader({map:e,side:THREE.DoubleSide,transparent:!0,color:this.color,opacity:this.opacity})),s=r.layout,h=new THREE.Mesh(r,a);h.entity=this,h.position.x=-s.width/2,h.position.y=1.035*s.height,o.scale.x=o.scale.y=-.05,o.add(h),this.mesh=h,this.add(o)},PANOLENS.SpriteText.prototype.update=function(t){var e;t=t||{},e=this.mesh,e.geometry.update(t),e.position.x=-e.geometry.layout.width/2,e.position.y=1.035*e.geometry.layout.height},PANOLENS.SpriteText.prototype.tween=function(t,e,n,i,o,r,a,s,h){return e=e||this,n=n||{},i=i||this.animationDuration,o=o||TWEEN.Easing.Exponential.Out,r=void 0!==r?r:0,a=a?a:null,s=s?s:null,h=h?h:null,this.tweens[t]||(this.tweens[t]=new TWEEN.Tween(e).to(n,i).easing(o).delay(r).onStart(a).onUpdate(s).onComplete(h)),this.tweens[t]},PANOLENS.SpriteText.prototype.setEntity=function(t){this.entity=t},PANOLENS.SpriteText.prototype.getLayout=function(){return this.mesh&&this.mesh.geometry&&this.mesh.geometry.layout||{}}}(),function(){PANOLENS.Widget=function(t){THREE.EventDispatcher.call(this),this.container=t||document.body,this.barElement,this.fullscreenElement,this.navigationElement,this.vrElement,this.videoElement},PANOLENS.Widget.prototype=Object.create(THREE.EventDispatcher.prototype),PANOLENS.Widget.prototype.constructor=PANOLENS.Widget,PANOLENS.Widget.prototype.addDefaultControlBar=function(){if(this.container){var t,e,n;t=document.createElement("div"),t.style.width="100%",t.style.height="44px",t.style["float"]="left",t.style.transform=t.style.webkitTransform=t.style.msTransform="translateY(-100%)",t.style.background="rgba( 0, 0, 0, 0.3 )",t.style.transition="all 0.5s ease",t.isHidden=!1,t.toggle=function(){t.isHidden=!t.isHidden,e=t.isHidden?"translateY(0)":"translateY(-100%)",n=t.isHidden?0:1,t.style.transform=t.style.webkitTransform=t.style.msTransform=e,t.style.opacity=n},this.fullscreenElement=this.createFullscreenButton(),this.navigationElement=this.createCameraControlButton(),this.vrElement=this.createVRButton(),this.videoElement=this.createVideoControl(),t.appendChild(this.fullscreenElement),t.appendChild(this.navigationElement),t.appendChild(this.vrElement),t.appendChild(this.videoElement),this.container.appendChild(t),this.addEventListener("control-bar-toggle",t.toggle),this.barElement=t}},PANOLENS.Widget.prototype.createVRButton=function(){function t(){n.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVR"})}var e,n=this;return e=this.createCustomItem({style:{backgroundImage:'url("'+PANOLENS.DataImage.Cardboard+'")'},onTap:t})},PANOLENS.Widget.prototype.createFullscreenButton=function(){function t(){o?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),o=!1):(i.container.requestFullscreen&&i.container.requestFullscreen(),i.container.msRequestFullscreen&&i.container.msRequestFullscreen(),i.container.mozRequestFullScreen&&i.container.mozRequestFullScreen(),i.container.webkitRequestFullscreen&&i.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),o=!0,e()),this.style.backgroundImage=o?'url("'+PANOLENS.DataImage.FullscreenLeave+'")':'url("'+PANOLENS.DataImage.FullscreenEnter+'")',i.dispatchEvent({type:"panolens-viewer-handler",method:"toggleFullscreen",data:o})}function e(){for(var t=document.querySelectorAll(".panolens-infospot"),e=0;e<t.length;e++)t[e].parentElement!==i.container&&i.container.appendChild(t[e])}var n,i=this,o=!1;return n=this.createCustomItem({style:{backgroundImage:'url("'+PANOLENS.DataImage.FullscreenEnter+'")'},onTap:t})},PANOLENS.Widget.prototype.createCameraControlButton=function(){function t(){n.dispatchEvent({type:"panolens-viewer-handler",method:"toggleNextControl"}),this.controlName="orbit"===this.controlName?"device-orientation":"orbit",this.style.backgroundImage='url("'+("orbit"===this.controlName?PANOLENS.DataImage.Gyro:PANOLENS.DataImage.Orbit)+'")'}var e,n=this;return e=this.createCustomItem({style:{backgroundImage:'url("'+PANOLENS.DataImage.Gyro+'")'},onTap:t}),e.controlName="orbit",e},PANOLENS.Widget.prototype.createVideoControl=function(){var t;return t=document.createElement("span"),t.style.display="none",t.show=function(){t.style.display=""},t.hide=function(){t.style.display="none",t.controlButton.paused=!0,t.controlButton.update(),t.seekBar.setProgress(0)},t.controlButton=this.createVideoControlButton(),t.seekBar=this.createVideoControlSeekbar(),t.appendChild(t.controlButton),t.appendChild(t.seekBar),this.addEventListener("video-control-show",t.show),this.addEventListener("video-control-hide",t.hide),t},PANOLENS.Widget.prototype.createVideoControlButton=function(){function t(){n.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay"}),this.paused=!this.paused,e.update()}var e,n=this;return e=this.createCustomItem({style:{"float":"left",backgroundImage:'url("'+PANOLENS.DataImage.VideoPlay+'")'},onTap:t}),e.paused=!0,e.update=function(){this.style.backgroundImage='url("'+(this.paused?PANOLENS.DataImage.VideoPlay:PANOLENS.DataImage.VideoPause)+'")'},e},PANOLENS.Widget.prototype.createVideoControlSeekbar=function(){function t(t){t.stopPropagation(),l=!0,s=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,h=parseInt(r.style.width)/100,u.container.addEventListener("mousemove",e,!1),u.container.addEventListener("mouseup",n,!1),u.container.addEventListener("touchmove",e,!1),u.container.addEventListener("touchend",n,!1)}function e(t){var e;l&&(e=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,c=(e-s)/o.clientWidth,c=h+c,c=c>1?1:0>c?0:c,o.setProgress(c),u.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:c}))}function n(t){t.stopPropagation(),l=!1,u.container.removeEventListener("mousemove",e,!1),u.container.removeEventListener("mouseup",n,!1),u.container.removeEventListener("touchmove",e,!1),u.container.removeEventListener("touchend",n,!1)}function i(t){var e;t.target!==a&&(e=t.changedTouches&&t.changedTouches.length>0?(t.changedTouches[0].pageX-t.target.getBoundingClientRect().left)/this.clientWidth:t.offsetX/this.clientWidth,u.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:e}),o.setProgress(t.offsetX/this.clientWidth))}var o,r,a,s,h,c,u=this,l=!1;return r=document.createElement("div"),r.style.width="0%",r.style.height="100%",r.style.backgroundColor="#fff",a=document.createElement("div"),a.style["float"]="right",a.style.width="14px",a.style.height="14px",a.style.transform="translate(7px, -5px)",a.style.borderRadius="50%",a.style.backgroundColor="#ddd",a.addEventListener("mousedown",t,!1),a.addEventListener("touchstart",t,!1),r.appendChild(a),o=this.createCustomItem({style:{"float":"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:i}),o.appendChild(r),o.setProgress=function(t){r.style.width=100*t+"%"},this.addEventListener("video-update",function(t){o.setProgress(t.percentage)}),o},PANOLENS.Widget.prototype.createCustomItem=function(t){t=t||{};var e=t.element||document.createElement("span");return e.style.cursor="pointer",e.style["float"]="right",e.style.width="44px",e.style.height="100%",e.style.backgroundSize="60%",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.addEventListener("mouseenter",function(t){e.style.filter=e.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"}),e.addEventListener("mouseleave",function(t){e.style.filter=e.style.webkitFilter=""}),e=this.mergeStyleOptions(e,t.style),t.onTap&&["click","touchend"].forEach(function(n){e.addEventListener(n,t.onTap,!1)}),e},PANOLENS.Widget.prototype.mergeStyleOptions=function(t,e){e=e||{};for(var n in e)e.hasOwnProperty(n)&&t.style.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}}(),function(){PANOLENS.Infospot=function(t,e,n){function i(e){e.minFilter=e.maxFilter=THREE.LinearFilter,e.wrapS=THREE.RepeatWrapping,e.repeat.x=-1,r.material.map=e,r.material.depthWrite=!1,r.material.depthTest=!1,o=e.image.width/e.image.height,r.scale.set(o*t,t,1),r.hoverStartScale=r.scale.clone(),r.hoverEndScale=r.scale.clone().multiplyScalar(1.3),r.hoverEndScale.z=1,r.scaleUpAnimation=new TWEEN.Tween(r.scale).to({x:r.hoverEndScale.x,y:r.hoverEndScale.y},500).easing(TWEEN.Easing.Elastic.Out),r.scaleDownAnimation=new TWEEN.Tween(r.scale).to({x:r.hoverStartScale.x,y:r.hoverStartScale.y},500).easing(TWEEN.Easing.Elastic.Out),r.showAnimation=new TWEEN.Tween(r.material).to({opacity:1},r.animationDuration).onStart(function(){r.visible=!0}).easing(TWEEN.Easing.Quartic.Out),r.hideAnimation=new TWEEN.Tween(r.material).to({opacity:0},r.animationDuration).onComplete(function(){r.visible=!1}).easing(TWEEN.Easing.Quartic.Out)}var o,r=this;THREE.Sprite.call(this),this.type="infospot",this.isHovering=!1,this.element,this.toPanorama,this.container=n||document.body,this.visible=!1,t=t||1,e=e||PANOLENS.DataImage.Info,this.scale.set(t,t,1),PANOLENS.Utils.TextureLoader.load(e,i)},PANOLENS.Infospot.prototype=Object.create(THREE.Sprite.prototype),PANOLENS.Infospot.prototype.onClick=function(){this.element&&this.lockHoverElement(),this.dispatchEvent({type:"click"})},PANOLENS.Infospot.prototype.onHover=function(t,e){if(this.isHovering||(this.onHoverStart(),this.isHovering=!0),this.element&&!this.element.locked){var n,i;n=t-this.element.clientWidth/2,i=e-this.element.clientHeight-30,this.element.style.webkitTransform=this.element.style.msTransform=this.element.style.transform="translate("+n+"px, "+i+"px)"}},PANOLENS.Infospot.prototype.onHoverStart=function(){this.hoverEndScale.equals(this.scale)||(this.scaleDownAnimation.stop(),this.scaleUpAnimation.start()),this.element&&"none"===this.element.style.display&&(this.element.style.display="block")},PANOLENS.Infospot.prototype.onHoverEnd=function(){this.isHovering=!1,this.hoverStartScale.equals(this.scale)||(this.scaleUpAnimation.stop(),this.scaleDownAnimation.start()),this.element&&"none"!==this.element.style.display&&(this.element.style.display="none",this.unlockHoverElement())},PANOLENS.Infospot.prototype.setText=function(t){this.element&&(this.element.textContent=t)},PANOLENS.Infospot.prototype.addHoverText=function(t){this.element||(this.element=document.createElement("div"),this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.style.display="none",this.element.classList.add("panolens-infospot"),this.container.appendChild(this.element)),this.setText(t)},PANOLENS.Infospot.prototype.addHoverElement=function(t){this.element||(this.element=t.cloneNode(!0),this.element.style.top=0,this.element.style.position="absolute",this.element.style.display="none",this.element.classList.add("panolens-infospot"),this.container.appendChild(this.element))},PANOLENS.Infospot.prototype.removeHoverElement=function(){this.element&&(this.container.removeChild(this.element),this.element=void 0)},PANOLENS.Infospot.prototype.lockHoverElement=function(){this.element&&(this.element.locked=!0)},PANOLENS.Infospot.prototype.unlockHoverElement=function(){this.element&&(this.element.locked=!1)},PANOLENS.Infospot.prototype.show=function(t){t=t||0,this.hideAnimation&&this.hideAnimation.stop(),this.showAnimation&&this.showAnimation.delay(t).start()},PANOLENS.Infospot.prototype.hide=function(t){t=t||0,this.showAnimation&&this.showAnimation.stop(),this.hideAnimation&&this.hideAnimation.delay(t).start()}}(),function(){"use strict";PANOLENS.Viewer=function(t){THREE.EventDispatcher.call(this),THREE&&(t=t||{},t.controlBar=void 0!==t.controlBar?t.controlBar:!0,t.autoHideControlBar=void 0!==t.autoHideControlBar?t.autoHideControlBar:!1,t.autoHideInfospot=void 0!==t.autoHideInfospot?t.autoHideInfospot:!0,t.horizontalView=void 0!==t.horizontalView?t.horizontalView:!1,t.clickTolerance=t.clickTolerance||10,this.container,t.container?this.container=t.container:(this.container=document.createElement("div"),this.container.style.width=window.innerWidth+"px",this.container.style.height=window.innerHeight+"px",document.body.appendChild(this.container),setTimeout(function(){this.container.style.width="100%",this.container.style.height="100%"}.bind(this),0)),this.options=t,this.camera=t.camera||new THREE.PerspectiveCamera(60,this.container.clientWidth/this.container.clientHeight,1,1e4),this.scene=t.scene||new THREE.Scene,this.renderer=t.renderer||new THREE.WebGLRenderer({alpha:!0,antialias:!0}),this.effect,this.mode=PANOLENS.Modes.NORMAL,this.OrbitControls,this.DeviceOrientationControls,this.controls,this.panorama,this.widget,this.hoverObject,this.hoveringObject,this.pressEntityObject,this.pressObject,this.raycaster=new THREE.Raycaster,this.userMouse=new THREE.Vector2,this.updateCallbacks=[],this.DEBUG=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,1),this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new THREE.OrbitControls(this.camera,this.container),this.OrbitControls.name="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.DeviceOrientationControls=new THREE.DeviceOrientationControls(this.camera),this.DeviceOrientationControls.name="device-orientation",this.effect=new THREE.CardboardEffect(this.renderer),
this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),this.options.controlBar!==!1&&this.addDefaultControlBar(),this.container.addEventListener("mousedown",this.onMouseDown.bind(this),!0),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),!0),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),!0),this.container.addEventListener("touchstart",this.onMouseDown.bind(this),!0),this.container.addEventListener("touchend",this.onMouseUp.bind(this),!0),window.addEventListener("resize",this.onWindowResize.bind(this),!0),window.addEventListener("keydown",this.onKeyDown.bind(this),!0),window.addEventListener("keyup",this.onKeyUp.bind(this),!0),this.animate.call(this))},PANOLENS.Viewer.prototype=Object.create(THREE.EventDispatcher.prototype),PANOLENS.Viewer.prototype.constructor=PANOLENS.Viewer,PANOLENS.Viewer.prototype.add=function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}this.scene.add(t),t.addEventListener&&t.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),"panorama"===t.type&&(this.addPanoramaEventListener(t),this.panorama||this.setPanorama(t))},PANOLENS.Viewer.prototype.addDefaultControlBar=function(){this.widget||(this.widget=new PANOLENS.Widget(this.container),this.widget.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.widget.addDefaultControlBar())},PANOLENS.Viewer.prototype.setPanorama=function(t){"panorama"===t.type&&(this.panorama&&this.panorama.onLeave(),(this.panorama=t).onEnter())},PANOLENS.Viewer.prototype.eventHandler=function(t){t.method&&this[t.method]&&this[t.method](t.data)},PANOLENS.Viewer.prototype.toggleVR=function(){this.effect&&(this.mode!==PANOLENS.Modes.VR?this.enableVR():this.disableVR()),this.dispatchEvent({type:"VR-toggle",mode:this.mode})},PANOLENS.Viewer.prototype.enableVR=function(){this.effect&&this.mode!==PANOLENS.Modes.VR&&(this.mode=PANOLENS.Modes.VR)},PANOLENS.Viewer.prototype.disableVR=function(){this.effect&&this.mode!==PANOLENS.Modes.NORMAL&&(this.mode=PANOLENS.Modes.NORMAL)},PANOLENS.Viewer.prototype.toggleVideoPlay=function(){this.panorama instanceof PANOLENS.VideoPanorama&&this.panorama.dispatchEvent({type:"video-toggle"})},PANOLENS.Viewer.prototype.setVideoCurrentTime=function(t){this.panorama instanceof PANOLENS.VideoPanorama&&this.panorama.dispatchEvent({type:"video-time",percentage:t})},PANOLENS.Viewer.prototype.onVideoUpdate=function(t){this.widget&&this.widget.dispatchEvent({type:"video-update",percentage:t})},PANOLENS.Viewer.prototype.addUpdateCallback=function(t){t&&this.updateCallbacks.push(t)},PANOLENS.Viewer.prototype.removeUpdateCallback=function(t){var e=this.updateCallbacks.indexOf(t);t&&e>=0&&this.updateCallbacks.splice(e,1)},PANOLENS.Viewer.prototype.showVideoWidget=function(){this.widget&&this.widget.dispatchEvent({type:"video-control-show"})},PANOLENS.Viewer.prototype.hideVideoWidget=function(){this.widget&&this.widget.dispatchEvent({type:"video-control-hide"})},PANOLENS.Viewer.prototype.addPanoramaEventListener=function(t){t.addEventListener("enter-start",this.setCameraControl.bind(this)),t instanceof PANOLENS.VideoPanorama&&(t.addEventListener("enter",this.showVideoWidget.bind(this)),t.addEventListener("leave",this.hideVideoWidget.bind(this)))},PANOLENS.Viewer.prototype.setCameraControl=function(){this.camera.position.copy(this.panorama.position),this.camera.position.z+=1,this.OrbitControls.target.copy(this.panorama.position)},PANOLENS.Viewer.prototype.getControl=function(){return this.control},PANOLENS.Viewer.prototype.getScene=function(){return this.scene},PANOLENS.Viewer.prototype.getCamera=function(){return this.camera},PANOLENS.Viewer.prototype.getRenderer=function(){return this.renderer},PANOLENS.Viewer.prototype.getContainer=function(){return this.container},PANOLENS.Viewer.prototype.getControlName=function(){return this.control.name},PANOLENS.Viewer.prototype.getNextControlName=function(){return this.controls[this.getNextControlIndex()].name},PANOLENS.Viewer.prototype.getNextControlIndex=function(){return this.controls.indexOf(this.control)+1>=this.controls.length?0:this.controls.indexOf(this.control)+1},PANOLENS.Viewer.prototype.enableControl=function(t){switch(t=t>=0&&t<this.controls.length?t:0,this.control.enabled=!1,this.control=this.controls[t],this.control.enabled=!0,this.control.name){case"orbit":this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case"device-orientation":this.camera.position.copy(this.panorama.position)}},PANOLENS.Viewer.prototype.toggleNextControl=function(){this.enableControl(this.getNextControlIndex())},PANOLENS.Viewer.prototype.toggleFullscreen=function(t){t?(this.container._width=this.container.clientWidth,this.container._height=this.container.clientHeight,this.container.style.width="100%",this.container.style.height="100%"):(this.container._width&&(this.container.style.width=this.container._width+"px"),this.container._height&&(this.container.style.height=this.container._height+"px"))},PANOLENS.Viewer.prototype.onWindowResize=function(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.dispatchEvent({type:"window-resize",width:this.container.clientWidth,height:this.container.clientHeight})},PANOLENS.Viewer.prototype.render=function(){TWEEN.update(),this.updateCallbacks.forEach(function(t){t()}),this.control&&this.control.update(),this.mode===PANOLENS.Modes.VR?this.effect.render(this.scene,this.camera):this.renderer.render(this.scene,this.camera)},PANOLENS.Viewer.prototype.onMouseDown=function(t){t.preventDefault(),this.userMouse.x=t.clientX?t.clientX:t.touches[0].clientX,this.userMouse.y=t.clientY?t.clientY:t.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(t)},PANOLENS.Viewer.prototype.onMouseMove=function(t){t.preventDefault(),this.userMouse.type="mousemove",this.onTap(t)},PANOLENS.Viewer.prototype.onMouseUp=function(t){var e,n=!1;this.userMouse.type="mouseup",e=this.userMouse.x>=t.clientX-this.options.clickTolerance&&this.userMouse.x<=t.clientX+this.options.clickTolerance&&this.userMouse.y>=t.clientY-this.options.clickTolerance&&this.userMouse.y<=t.clientY+this.options.clickTolerance||t.changedTouches&&this.userMouse.x>=t.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=t.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=t.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=t.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0,t&&t.target&&!t.target.classList.contains("panolens-canvas")||(t.preventDefault(),n=t.changedTouches&&1===t.changedTouches.length?this.onTap({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},e):this.onTap(t,e),this.userMouse.type="none",n||"click"===e&&(this.options.autoHideInfospot&&this.panorama&&this.panorama.toggleChildrenVisibility(),this.options.autoHideControlBar&&this.toggleControlBar()))},PANOLENS.Viewer.prototype.onTap=function(t,e){var n,i,o,r,a={};if(a.x=(t.clientX-this.renderer.domElement.offsetLeft)/this.renderer.domElement.clientWidth*2-1,a.y=2*-((t.clientY-this.renderer.domElement.offsetTop)/this.renderer.domElement.clientHeight)+1,this.raycaster.setFromCamera(a,this.camera),this.panorama)if(this.DEBUG&&(i=this.raycaster.intersectObject(this.panorama,!0),i.length>0&&(i[0].point.applyAxisAngle(new THREE.Vector3(-1,0,0),this.panorama.rotation.x),i[0].point.applyAxisAngle(new THREE.Vector3(0,-1,0),this.panorama.rotation.y),i[0].point.applyAxisAngle(new THREE.Vector3(0,0,-1),this.panorama.rotation.z),i[0].point.sub(this.panorama.position))),i=this.raycaster.intersectObjects(this.panorama.children,!0),o=this.getConvertedIntersect(i),r=i.length>0?i[0].object:r,"mouseup"===this.userMouse.type&&(o&&this.pressEntityObject===o&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(r&&this.pressObject===r&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0),"click"===e?(this.panorama.dispatchEvent({type:"click",intersects:i,mouseEvent:t}),o&&o.dispatchEvent&&o.dispatchEvent({type:"click-entity",mouseEvent:t}),r&&r.dispatchEvent&&r.dispatchEvent({type:"click",mouseEvent:t})):(this.panorama.dispatchEvent({type:"hover",intersects:i,mouseEvent:t}),(this.hoverObject&&i.length>0&&this.hoverObject!==o||this.hoverObject&&0===i.length)&&(this.hoverObject.dispatchEvent&&this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:t}),this.hoverObject=void 0),o&&i.length>0&&(this.hoverObject!==o&&(this.hoverObject=o,this.hoverObject.dispatchEvent&&this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressEntityObject!=o&&(this.pressEntityObject=o,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressObject!=r&&(this.pressObject=r,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:t})),"mousemove"===this.userMouse.type&&(this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:t}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:t}))),!o&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),!r&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0)),i.length>0&&i[0].object instanceof PANOLENS.Infospot){if(n=i[0].object,n.onHover&&(this.hoveringObject=n,this.container.style.cursor="pointer",n.onHover(t.clientX,t.clientY)),"click"===e&&n.onClick)return n.onClick(),!0}else this.container.style.cursor="default",this.hideHoveringObject()},PANOLENS.Viewer.prototype.getConvertedIntersect=function(t){for(var e,n=0;n<t.length;n++)if(t[n].object&&!t[n].object.passThrough){if(t[n].object.entity&&t[n].object.entity.passThrough)continue;if(t[n].object.entity&&!t[n].object.entity.passThrough){e=t[n].object.entity;break}e=t[n].object;break}return e},PANOLENS.Viewer.prototype.hideHoveringObject=function(t){this.hoveringObject&&(this.hoveringObject.onHoverEnd(),this.hoveringObject=void 0)},PANOLENS.Viewer.prototype.toggleControlBar=function(){this.widget&&this.widget.dispatchEvent({type:"control-bar-toggle"})},PANOLENS.Viewer.prototype.onKeyDown=function(t){(17===t.keyCode||"Control"===t.keyIdentifier)&&(this.DEBUG=!0)},PANOLENS.Viewer.prototype.onKeyUp=function(t){this.DEBUG=!1},PANOLENS.Viewer.prototype.animate=function(){window.requestAnimationFrame(this.animate.bind(this)),this.render()}}(),function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){function i(t){l.call(this),"string"==typeof t&&(t={text:t}),this._opt=h({},t),t&&this.update(t)}var o=t("layout-bmfont-text"),r=t("inherits"),a=t("quad-indices"),s=t("three-buffer-vertex-data"),h=t("object-assign"),c=t("./lib/vertices"),u=t("./lib/utils"),l=THREE.BufferGeometry;e.exports=function(t){return new i(t)},r(i,l),i.prototype.update=function(t){if("string"==typeof t&&(t={text:t}),t=h({},this._opt,t),!t.font)throw new TypeError("must specify a { font } in options");this.layout=o(t);var e=t.flipY!==!1,n=t.font,i=n.common.scaleW,r=n.common.scaleH,u=this.layout.glyphs.filter(function(t){var e=t.data;return e.width*e.height>0});this.visibleGlyphs=u;var l=c.positions(u),d=c.uvs(u,i,r,e),p=a({clockwise:!0,type:"uint16",count:u.length});if(s.index(this,p,1,"uint16"),s.attr(this,"position",l,2),s.attr(this,"uv",d,2),!t.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(t.multipage){var f=c.pages(u);s.attr(this,"page",f,1)}},i.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var t=this.attributes.position.array,e=this.attributes.position.itemSize;return!t||!e||t.length<2?(this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0)):(u.computeSphere(t,this.boundingSphere),void isNaN(this.boundingSphere.radius))},i.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.boundingBox,e=this.attributes.position.array,n=this.attributes.position.itemSize;return!e||!n||e.length<2?void t.makeEmpty():void u.computeBox(e,t)}},{"./lib/utils":2,"./lib/vertices":3,inherits:4,"layout-bmfont-text":5,"object-assign":26,"quad-indices":27,"three-buffer-vertex-data":31}],2:[function(t,e,n){function i(t){var e=t.length/o;r.min[0]=t[0],r.min[1]=t[1],r.max[0]=t[0],r.max[1]=t[1];for(var n=0;e>n;n++){var i=t[n*o+0],a=t[n*o+1];r.min[0]=Math.min(i,r.min[0]),r.min[1]=Math.min(a,r.min[1]),r.max[0]=Math.max(i,r.max[0]),r.max[1]=Math.max(a,r.max[1])}}var o=2,r={min:[0,0],max:[0,0]};e.exports.computeBox=function(t,e){i(t),e.min.set(r.min[0],r.min[1],0),e.max.set(r.max[0],r.max[1],0)},e.exports.computeSphere=function(t,e){i(t);var n=r.min[0],o=r.min[1],a=r.max[0],s=r.max[1],h=a-n,c=s-o,u=Math.sqrt(h*h+c*c);e.center.set(n+h/2,o+c/2,0),e.radius=u/2}},{}],3:[function(t,e,n){e.exports.pages=function i(t){var i=new Float32Array(4*t.length*1),e=0;return t.forEach(function(t){var n=t.data.page||0;i[e++]=n,i[e++]=n,i[e++]=n,i[e++]=n}),i},e.exports.uvs=function o(t,e,n,i){var o=new Float32Array(4*t.length*2),r=0;return t.forEach(function(t){var a=t.data,s=a.x+a.width,h=a.y+a.height,c=a.x/e,u=a.y/n,l=s/e,d=h/n;i&&(u=(n-a.y)/n,d=(n-h)/n),o[r++]=c,o[r++]=u,o[r++]=c,o[r++]=d,o[r++]=l,o[r++]=d,o[r++]=l,o[r++]=u}),o},e.exports.positions=function r(t){var r=new Float32Array(4*t.length*2),e=0;return t.forEach(function(t){var n=t.data,i=t.position[0]+n.xoffset,o=t.position[1]+n.yoffset,a=n.width,s=n.height;r[e++]=i,r[e++]=o,r[e++]=i,r[e++]=o+s,r[e++]=i+a,r[e++]=o+s,r[e++]=i+a,r[e++]=o}),r}},{}],4:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],5:[function(t,e,n){function i(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function o(t){Object.defineProperty(i.prototype,t,{get:r(t),configurable:!0})}function r(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}function a(t,e){if(!t.chars||0===t.chars.length)return null;var n=f(t.chars,e);return n>=0?t.chars[n]:null}function s(t){for(var e=0;e<m.length;e++){var n=m[e].charCodeAt(0),i=f(t.chars,n);if(i>=0)return t.chars[i].height}return 0}function h(t){for(var e=0;e<g.length;e++){var n=g[e].charCodeAt(0),i=f(t.chars,n);if(i>=0)return t.chars[i]}return 0}function c(t){for(var e=0;e<y.length;e++){var n=y[e].charCodeAt(0),i=f(t.chars,n);if(i>=0)return t.chars[i].height}return 0}function u(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var i=t.kernings,o=0;o<i.length;o++){var r=i[o];if(r.first===e&&r.second===n)return r.amount}return 0}function l(t){return"center"===t?N:"right"===t?L:w}var d=t("word-wrapper"),p=t("xtend"),f=t("indexof-property")("id"),E=t("as-number"),m=["x","e","a","o","n","s","r","c","u","m","v","w","z"],g=["m","w"],y=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],A="	".charCodeAt(0),v=" ".charCodeAt(0),w=0,N=1,L=2;e.exports=function(t){return new i(t)},i.prototype.update=function(t){if(t=p({measure:this._measure},t),this._opt=t,this._opt.tabSize=E(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var e=this.glyphs,n=t.text||"",i=t.font;this._setupSpaceGlyphs(i);var o=d.lines(n,t),r=t.width||0;e.length=0;var a=o.reduce(function(t,e){return Math.max(t,e.width,r)},0),h=0,f=0,m=E(t.lineHeight,i.common.lineHeight),g=i.common.base,y=m-g,A=t.letterSpacing||0,v=m*o.length-y,w=l(this._opt.align);f-=v,this._width=a,this._height=v,this._descender=m-g,this._baseline=g,this._xHeight=s(i),this._capHeight=c(i),this._lineHeight=m,this._ascender=m-y-this._xHeight;var M=this;o.forEach(function(t,o){for(var r,s=t.start,c=t.end,l=t.width,d=s;c>d;d++){var p=n.charCodeAt(d),E=M.getGlyph(i,p);if(E){r&&(h+=u(i,r.id,E.id));var g=h;w===N?g+=(a-l)/2:w===L&&(g+=a-l),e.push({position:[g,f],data:E,index:d,line:o}),h+=E.xadvance+A,r=E}}f+=m,h=0}),this._linesTotal=o.length},i.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=a(t,v)||h(t)||t.chars[0],n=this._opt.tabSize*e.xadvance;this._fallbackSpaceGlyph=e,this._fallbackTabGlyph=p(e,{x:0,y:0,xadvance:n,id:A,xoffset:0,yoffset:0,width:0,height:0})}},i.prototype.getGlyph=function(t,e){var n=a(t,e);return n?n:e===A?this._fallbackTabGlyph:e===v?this._fallbackSpaceGlyph:null},i.prototype.computeMetrics=function(t,e,n,i){var o,r,a=this._opt.letterSpacing||0,s=this._opt.font,h=0,c=0,l=0;if(!s.chars||0===s.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var d=e;n>d;d++){var p=t.charCodeAt(d),o=this.getGlyph(s,p);if(o){var f=(o.xoffset,r?u(s,r.id,o.id):0);h+=f;var E=h+o.xadvance+a,m=h+o.width;if(m>=i||E>=i)break;h=E,c=m,r=o}l++}return r&&(c+=r.xoffset),{start:e,end:e+l,width:c}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(o)},{"as-number":6,"indexof-property":7,"word-wrapper":8,xtend:9}],6:[function(t,e,n){e.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},{}],7:[function(t,e,n){e.exports=function(t){if(!t||"string"!=typeof t)throw new Error("must specify property for indexof search");return new Function("array","value","start",["start = start || 0","for (var i=start; i<array.length; i++)",'  if (array[i]["'+t+'"] === value)',"      return i","return -1"].join("\n"))}},{}],8:[function(t,e,n){function i(t,e,n,i){var o=t.indexOf(e,n);return-1===o||o>i?i:o}function o(t){return u.test(t)}function r(t,e,n,i,o){for(var r=[],a=n,s=n;i>s&&s<e.length;s++){var c=e.charAt(s),u=h.test(c);if(u||s===i-1){var l=u?s:s+1,d=t(e,a,l,o);r.push(d),a=s+1}}return r}function a(t,e,n,r,a,s){var h=[],u=a;for("nowrap"===s&&(u=Number.MAX_VALUE);r>n&&n<e.length;){for(var l=i(e,c,n,r);l>n&&o(e.charAt(n));)n++;var d=t(e,n,l,u),p=n+(d.end-d.start),f=p+c.length;if(l>p){for(;p>n&&!o(e.charAt(p));)p--;if(p===n)f>n+c.length&&f--,p=f;else for(f=p;p>n&&o(e.charAt(p-c.length));)p--}if(p>=n){var E=t(e,n,p,u);h.push(E)}n=f}return h}function s(t,e,n,i){var o=Math.min(i,n-e);return{start:e,end:e+o}}var h=/\n/,c="\n",u=/\s/;e.exports=function(t,n){var i=e.exports.lines(t,n);return i.map(function(e){return t.substring(e.start,e.end)}).join("\n")},e.exports.lines=function(t,e){if(e=e||{},0===e.width&&"nowrap"!==e.mode)return[];t=t||"";var n="number"==typeof e.width?e.width:Number.MAX_VALUE,i=Math.max(0,e.start||0),o="number"==typeof e.end?e.end:t.length,h=e.mode,c=e.measure||s;return"pre"===h?r(c,t,i,o,n):a(c,t,i,o,n,h)}},{}],9:[function(t,e,n){function i(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)o.call(n,i)&&(t[i]=n[i])}return t}e.exports=i;var o=Object.prototype.hasOwnProperty},{}],10:[function(t,e,n){(function(n){function i(t){var e=Object.prototype.toString;return"[object ArrayBuffer]"===e.call(t)}function o(t){if(d)return l(t,{responseType:"arraybuffer"});if("undefined"==typeof window.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var e=new window.XMLHttpRequest;return e.overrideMimeType("text/plain; charset=x-user-defined"),l({xhr:e},t)}var r=t("xhr"),a=function(){},s=t("parse-bmfont-ascii"),h=t("parse-bmfont-xml"),c=t("parse-bmfont-binary"),u=t("./lib/is-binary"),l=t("xtend"),d=function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();e.exports=function(t,e){e="function"==typeof e?e:a,"string"==typeof t?t={uri:t}:t||(t={});var l=t.binary;l&&(t=o(t)),r(t,function(o,r,l){if(o)return e(o);if(!/^2/.test(r.statusCode))return e(new Error("http status code: "+r.statusCode));if(!l)return e(new Error("no body result"));var d=!1;if(i(l)){var p=new Uint8Array(l);l=new n(p,"binary")}u(l)&&(d=!0,"string"==typeof l&&(l=new n(l,"binary"))),d||(n.isBuffer(l)&&(l=l.toString(t.encoding)),l=l.trim());var f;try{var E=r.headers["content-type"];f=d?c(l):/json/.test(E)||"{"===l.charAt(0)?JSON.parse(l):/xml/.test(E)||"<"===l.charAt(0)?h(l):s(l)}catch(m){e(new Error("error parsing font "+m.message)),e=a}e(null,f)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":11,buffer:37,"parse-bmfont-ascii":13,"parse-bmfont-binary":14,"parse-bmfont-xml":15,xhr:18,xtend:25}],11:[function(t,e,n){(function(n){var i=t("buffer-equal"),o=new n([66,77,70,3]);e.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):t.length>4&&i(t.slice(0,4),o)}}).call(this,t("buffer").Buffer)},{buffer:37,"buffer-equal":12}],12:[function(t,e,n){var i=t("buffer").Buffer;e.exports=function(t,e){if(i.isBuffer(t)&&i.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}},{buffer:37}],13:[function(t,e,n){function i(t,e){if(t=t.replace(/\t+/g," ").trim(),!t)return null;var n=t.indexOf(" ");if(-1===n)throw new Error("no named row at line "+e);var i=t.substring(0,n);t=t.substring(n+1),t=t.replace(/letter=[\'\"]\S+[\'\"]/gi,""),t=t.split("="),t=t.map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var r=[],a=0;a<t.length;a++){var s=t[a];0===a?r.push({key:s[0],data:""}):a===t.length-1?r[r.length-1].data=o(s[0]):(r[r.length-1].data=o(s[0]),r.push({key:s[1],data:""}))}var h={key:i,data:{}};return r.forEach(function(t){h.data[t.key]=t.data}),h}function o(t){return t&&0!==t.length?0===t.indexOf('"')||0===t.indexOf("'")?t.substring(1,t.length-1):-1!==t.indexOf(",")?r(t):parseInt(t,10):""}function r(t){return t.split(",").map(function(t){return parseInt(t,10)})}e.exports=function(t){if(!t)throw new Error("no data provided");t=t.toString().trim();var e={pages:[],chars:[],kernings:[]},n=t.split(/\r\n?|\n/g);if(0===n.length)throw new Error("no data in BMFont file");for(var o=0;o<n.length;o++){var r=i(n[o],o);if(r)if("page"===r.key){if("number"!=typeof r.data.id)throw new Error("malformed file at line "+o+" -- needs page id=N");if("string"!=typeof r.data.file)throw new Error("malformed file at line "+o+' -- needs page file="path"');e.pages[r.data.id]=r.data.file}else"chars"===r.key||"kernings"===r.key||("char"===r.key?e.chars.push(r.data):"kerning"===r.key?e.kernings.push(r.data):e[r.key]=r.data)}return e}},{}],14:[function(t,e,n){function i(t,e,n){if(n>e.length-1)return 0;var i=e.readUInt8(n++),c=e.readInt32LE(n);switch(n+=4,i){case 1:t.info=o(e,n);break;case 2:t.common=r(e,n);break;case 3:t.pages=a(e,n,c);break;case 4:t.chars=s(e,n,c);break;case 5:t.kernings=h(e,n,c)}return 5+c}function o(t,e){var n={};n.size=t.readInt16LE(e);var i=t.readUInt8(e+2);return n.smooth=i>>7&1,n.unicode=i>>6&1,n.italic=i>>5&1,n.bold=i>>4&1,i>>3&1&&(n.fixedHeight=1),n.charset=t.readUInt8(e+3)||"",n.stretchH=t.readUInt16LE(e+4),n.aa=t.readUInt8(e+6),n.padding=[t.readInt8(e+7),t.readInt8(e+8),t.readInt8(e+9),t.readInt8(e+10)],n.spacing=[t.readInt8(e+11),t.readInt8(e+12)],n.outline=t.readUInt8(e+13),n.face=u(t,e+14),n}function r(t,e){var n={};n.lineHeight=t.readUInt16LE(e),n.base=t.readUInt16LE(e+2),n.scaleW=t.readUInt16LE(e+4),n.scaleH=t.readUInt16LE(e+6),n.pages=t.readUInt16LE(e+8);t.readUInt8(e+10);return n.packed=0,n.alphaChnl=t.readUInt8(e+11),n.redChnl=t.readUInt8(e+12),n.greenChnl=t.readUInt8(e+13),n.blueChnl=t.readUInt8(e+14),n}function a(t,e,n){for(var i=[],o=c(t,e),r=o.length+1,a=n/r,s=0;a>s;s++)i[s]=t.slice(e,e+o.length).toString("utf8"),e+=r;return i}function s(t,e,n){for(var i=[],o=n/20,r=0;o>r;r++){var a={},s=20*r;a.id=t.readUInt32LE(e+0+s),a.x=t.readUInt16LE(e+4+s),a.y=t.readUInt16LE(e+6+s),a.width=t.readUInt16LE(e+8+s),a.height=t.readUInt16LE(e+10+s),a.xoffset=t.readInt16LE(e+12+s),a.yoffset=t.readInt16LE(e+14+s),a.xadvance=t.readInt16LE(e+16+s),a.page=t.readUInt8(e+18+s),a.chnl=t.readUInt8(e+19+s),i[r]=a}return i}function h(t,e,n){for(var i=[],o=n/10,r=0;o>r;r++){var a={},s=10*r;a.first=t.readUInt32LE(e+0+s),a.second=t.readUInt32LE(e+4+s),a.amount=t.readInt16LE(e+8+s),i[r]=a}return i}function c(t,e){for(var n=e;n<t.length&&0!==t[n];n++);return t.slice(e,n)}function u(t,e){return c(t,e).toString("utf8")}var l=[66,77,70];e.exports=function(t){if(t.length<6)throw new Error("invalid buffer length for BMFont");var e=l.every(function(e,n){return t.readUInt8(n)===e});if(!e)throw new Error("BMFont missing BMF byte header");var n=3,o=t.readUInt8(n++);if(o>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var r={kernings:[],chars:[]},a=0;5>a;a++)n+=i(r,t,n);return r}},{}],15:[function(t,e,n){function i(t){var e=o(t);return e.reduce(function(t,e){var n=r(e.nodeName);return t[n]=e.nodeValue,t},{})}function o(t){for(var e=[],n=0;n<t.attributes.length;n++)e.push(t.attributes[n]);return e}function r(t){return h[t.toLowerCase()]||t}var a=t("./parse-attribs"),s=t("xml-parse-from-string"),h={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};e.exports=function(t){t=t.toString();var e=s(t),n={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(t){var o=e.getElementsByTagName(t)[0];o&&(n[t]=a(i(o)))});var o=e.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var r=o.getElementsByTagName("page"),h=0;h<r.length;h++){var c=r[h],u=parseInt(c.getAttribute("id"),10),l=c.getAttribute("file");if(isNaN(u))throw new Error('malformed file -- page "id" attribute is NaN');if(!l)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(u,10)]=l}return["chars","kernings"].forEach(function(t){var o=e.getElementsByTagName(t)[0];if(o)for(var r=t.substring(0,t.length-1),s=o.getElementsByTagName(r),h=0;h<s.length;h++){var c=s[h];n[t].push(a(i(c)))}}),n}},{"./parse-attribs":16,"xml-parse-from-string":17}],16:[function(t,e,n){function i(t){return t.split(",").map(function(t){return parseInt(t,10)})}var o="chasrset";e.exports=function(t){o in t&&(t.charset=t[o],delete t[o]);for(var e in t)"face"!==e&&"charset"!==e&&("padding"===e||"spacing"===e?t[e]=i(t[e]):t[e]=parseInt(t[e],10));return t}},{}],17:[function(t,e,n){e.exports=function(){return"undefined"!=typeof window.DOMParser?function(t){var e=new window.DOMParser;return e.parseFromString(t,"application/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new window.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(t){var e=document.createElement("div");return e.innerHTML=t,e}}()},{}],18:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<t.length;n++)e(t[n])}function o(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function r(t,e,n){var i=t;return l(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=p(e,{uri:t}),i.callback=n,i}function a(t,e,n){return e=r(t,e,n),s(e)}function s(t){function e(){4===c.readyState&&r()}function n(){var t=void 0;if(c.response?t=c.response:"text"!==c.responseType&&c.responseType||(t=c.responseText||c.responseXML),v)try{t=JSON.parse(t)}catch(e){}return t}function i(t){clearTimeout(f),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,h)}function r(){if(!p){var e;clearTimeout(f),e=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=h,o=null;0!==e?(i={body:n(),statusCode:e,method:m,headers:{},url:E,rawRequest:c},c.getAllResponseHeaders&&(i.headers=d(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),s(o,i,i.body)}}var s=t.callback;if("undefined"==typeof s)throw new Error("callback argument missing");s=u(s);var h={body:void 0,headers:{},statusCode:0,method:m,url:E,rawRequest:c},c=t.xhr||null;c||(c=t.cors||t.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var l,p,f,E=c.url=t.uri||t.url,m=c.method=t.method||"GET",g=t.body||t.data||null,y=c.headers=t.headers||{},A=!!t.sync,v=!1;if("json"in t&&(v=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),g=JSON.stringify(t.json))),c.onreadystatechange=e,c.onload=r,c.onerror=i,c.onprogress=function(){},c.ontimeout=i,c.open(m,E,!A,t.username,t.password),A||(c.withCredentials=!!t.withCredentials),!A&&t.timeout>0&&(f=setTimeout(function(){p=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)},t.timeout)),c.setRequestHeader)for(l in y)y.hasOwnProperty(l)&&c.setRequestHeader(l,y[l]);else if(t.headers&&!o(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(c),c.send(g),c}function h(){}var c=t("global/window"),u=t("once"),l=t("is-function"),d=t("parse-headers"),p=t("xtend");e.exports=a,a.XMLHttpRequest=c.XMLHttpRequest||h,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:c.XDomainRequest,i(["get","put","post","patch","head","delete"],function(t){a["delete"===t?"del":t]=function(e,n,i){return n=r(e,n,i),n.method=t.toUpperCase(),s(n)}})},{"global/window":19,"is-function":20,once:21,"parse-headers":24,xtend:25}],19:[function(t,e,n){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e,n){function i(t){var e=o.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=i;var o=Object.prototype.toString},{}],21:[function(t,e,n){function i(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=i,i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0})})},{}],22:[function(t,e,n){function i(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===h.call(t)?o(t,e,n):"string"==typeof t?r(t,e,n):a(t,e,n)}function o(t,e,n){for(var i=0,o=t.length;o>i;i++)c.call(t,i)&&e.call(n,t[i],i,t)}function r(t,e,n){for(var i=0,o=t.length;o>i;i++)e.call(n,t.charAt(i),i,t)}function a(t,e,n){for(var i in t)c.call(t,i)&&e.call(n,t[i],i,t)}var s=t("is-function");e.exports=i;var h=Object.prototype.toString,c=Object.prototype.hasOwnProperty},{"is-function":20}],23:[function(t,e,n){function i(t){return t.replace(/^\s*|\s*$/g,"")}n=e.exports=i,n.left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],24:[function(t,e,n){var i=t("trim"),o=t("for-each"),r=function(t){
return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return o(i(t).split("\n"),function(t){var n=t.indexOf(":"),o=i(t.slice(0,n)).toLowerCase(),a=i(t.slice(n+1));"undefined"==typeof e[o]?e[o]=a:r(e[o])?e[o].push(a):e[o]=[e[o],a]}),e}},{"for-each":22,trim:23}],25:[function(t,e,n){arguments[4][9][0].apply(n,arguments)},{dup:9}],26:[function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var n,a,s=i(t),h=1;h<arguments.length;h++){n=Object(arguments[h]);for(var c in n)o.call(n,c)&&(s[c]=n[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var u=0;u<a.length;u++)r.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},{}],27:[function(t,e,n){var i=t("dtype"),o=t("an-array"),r=t("is-buffer"),a=[0,2,3],s=[2,1,3];e.exports=function(t,e){t&&(o(t)||r(t))||(e=t||{},t=null),e="number"==typeof e?{count:e}:e||{};for(var n="string"==typeof e.type?e.type:"uint16",h="number"==typeof e.count?e.count:1,c=e.start||0,u=e.clockwise!==!1?a:s,l=u[0],d=u[1],p=u[2],f=6*h,E=t||new(i(n))(f),m=0,g=0;f>m;m+=6,g+=4){var y=m+c;E[y+0]=g+0,E[y+1]=g+1,E[y+2]=g+2,E[y+3]=g+l,E[y+4]=g+d,E[y+5]=g+p}return E}},{"an-array":28,dtype:29,"is-buffer":30}],28:[function(t,e,n){function i(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===o.call(t.buffer)||Array.isArray(t)}var o=Object.prototype.toString;e.exports=i},{}],29:[function(t,e,n){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],30:[function(t,e,n){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],31:[function(t,e,n){function i(t,e,n,i){"number"!=typeof n&&(n=1),"number"!=typeof i&&(i="uint16");var o=!t.index&&"function"!=typeof t.setIndex,a=o?t.getAttribute("index"):t.index,s=r(a,e,n,i);s&&(o?t.addAttribute("index",s):t.index=s)}function o(t,e,n,i,o){if("number"!=typeof i&&(i=3),"number"!=typeof o&&(o="float32"),Array.isArray(n)&&Array.isArray(n[0])&&n[0].length!==i)throw new Error("Nested vertex array has unexpected size; expected "+i+" but found "+n[0].length);var a=t.getAttribute(e),s=r(a,n,i,o);s&&t.addAttribute(e,s)}function r(t,e,n,i){return e=e||[],!t||a(t,e,n)?(e=s(e,i),t=new THREE.BufferAttribute(e,n),t.needsUpdate=!0,t):(s(e,t.array),t.needsUpdate=!0,null)}function a(t,e,n){if(t.itemSize!==n)return!0;if(!t.array)return!0;var i=t.array.length;return Array.isArray(e)&&Array.isArray(e[0])?i!==e.length*n:i!==e.length}var s=t("flatten-vertex-data");e.exports.attr=o,e.exports.index=i},{"flatten-vertex-data":32}],32:[function(t,e,n){function i(t,e,n){if(!t)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(t)&&Array.isArray(t[0])){var i=t[0].length,r=t.length*i;e&&"string"!=typeof e||(e=new(o(e||"float32"))(r+n));var a=e.length-n;if(r!==a)throw new Error("source length "+r+" ("+i+"x"+t.length+") does not match destination length "+a);for(var s=0,h=n;s<t.length;s++)for(var c=0;i>c;c++)e[h++]=t[s][c]}else if(e&&"string"!=typeof e)e.set(t,n);else{var u=o(e||"float32");0===n?e=new u(t):(e=new u(t.length+n),e.set(t,n))}return e}var o=t("dtype");e.exports=i},{dtype:33}],33:[function(t,e,n){arguments[4][29][0].apply(n,arguments)},{dup:29}],34:[function(t,e,n){var i=t("object-assign");e.exports=function(t){t=t||{};var e="number"==typeof t.opacity?t.opacity:1,n="number"==typeof t.alphaTest?t.alphaTest:1e-4,o=t.precision||"highp",r=t.color,a=t.map;return delete t.map,delete t.color,delete t.precision,delete t.opacity,i({uniforms:{opacity:{type:"f",value:e},map:{type:"t",value:a||new THREE.Texture},color:{type:"c",value:new THREE.Color(r)}},vertexShader:["attribute vec2 uv;","attribute vec4 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * position;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives : enable","#endif","precision "+o+" float;","uniform float opacity;","uniform vec3 color;","uniform sampler2D map;","varying vec2 vUv;","float aastep(float value) {","  #ifdef GL_OES_standard_derivatives","    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;","  #else","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","  #endif","  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","}","void main() {","  vec4 texColor = texture2D(map, vUv);","  float alpha = aastep(texColor.a);","  gl_FragColor = vec4(color, opacity * alpha);",0===n?"":"  if (gl_FragColor.a < "+n+") discard;","}"].join("\n")},t)}},{"object-assign":26}],35:[function(t,e,n){var i=t("load-bmfont");e.exports=function(t,e){i(t.font,function(n,i){if(n)throw n;PANOLENS.Utils.TextureLoader.load(t.image,function(t){e(i,t)})})}},{"load-bmfont":10}],36:[function(t,e,n){var i=t("../"),o=t("../shaders/sdf");PANOLENS&&PANOLENS.Utils&&PANOLENS.SpriteText&&(PANOLENS.Utils.loadBMFont=function(e,n){t("./load")(e,PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype,n))},PANOLENS.SpriteText.prototype.generateTextGeometry=i,PANOLENS.SpriteText.prototype.generateSDFShader=o)},{"../":1,"../shaders/sdf":34,"./load":35}],37:[function(t,e,n){(function(e){"use strict";function i(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function o(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t){return this instanceof r?(r.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):h(this,t)):arguments.length>1?new r(t,arguments[1]):new r(t)}function a(t,e){if(t=E(t,0>e?0:0|m(e)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function s(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|y(e,n);return t=E(t,i),t.write(e,n),t}function h(t,e){if(r.isBuffer(e))return c(t,e);if(J(e))return u(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return l(t,e);if(e instanceof ArrayBuffer)return d(t,e)}return e.length?p(t,e):f(t,e)}function c(t,e){var n=0|m(e.length);return t=E(t,n),e.copy(t,0,0,n),t}function u(t,e){var n=0|m(e.length);t=E(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function l(t,e){var n=0|m(e.length);t=E(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function d(t,e){return r.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=r.prototype):t=l(t,new Uint8Array(e)),t}function p(t,e){var n=0|m(e.length);t=E(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function f(t,e){var n,i=0;"Buffer"===e.type&&J(e.data)&&(n=e.data,i=0|m(n.length)),t=E(t,i);for(var o=0;i>o;o+=1)t[o]=255&n[o];return t}function E(t,e){r.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=r.prototype):t.length=e;var n=0!==e&&e<=r.poolSize>>>1;return n&&(t.parent=q),t}function m(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var n=new r(t,e);return delete n.parent,n}function y(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(i)return W(t).length;e=(""+e).toLowerCase(),i=!0}}function A(t,e,n){var i=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return S(this,e,n);case"binary":return P(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,n,i){n=Number(n)||0;var o=t.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var r=e.length;if(r%2!==0)throw new Error("Invalid hex string");i>r/2&&(i=r/2);for(var a=0;i>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function w(t,e,n,i){return F(W(e,t.length-n),t,n,i)}function N(t,e,n,i){return F(Y(e),t,n,i)}function L(t,e,n,i){return N(t,e,n,i)}function M(t,e,n,i){return F(Q(e),t,n,i)}function b(t,e,n,i){return F(Z(e,t.length-n),t,n,i)}function T(t,e,n){return 0===e&&n===t.length?_.fromByteArray(t):_.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var i=[],o=e;n>o;){var r=t[o],a=null,s=r>239?4:r>223?3:r>191?2:1;if(n>=o+s){var h,c,u,l;switch(s){case 1:128>r&&(a=r);break;case 2:h=t[o+1],128===(192&h)&&(l=(31&r)<<6|63&h,l>127&&(a=l));break;case 3:h=t[o+1],c=t[o+2],128===(192&h)&&128===(192&c)&&(l=(15&r)<<12|(63&h)<<6|63&c,l>2047&&(55296>l||l>57343)&&(a=l));break;case 4:h=t[o+1],c=t[o+2],u=t[o+3],128===(192&h)&&128===(192&c)&&128===(192&u)&&(l=(15&r)<<18|(63&h)<<12|(63&c)<<6|63&u,l>65535&&1114112>l&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),o+=s}return I(i)}function I(t){var e=t.length;if(K>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=K));return n}function S(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)i+=String.fromCharCode(127&t[o]);return i}function P(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)i+=String.fromCharCode(t[o]);return i}function x(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var o="",r=e;n>r;r++)o+=G(t[r]);return o}function j(t,e,n){for(var i=t.slice(e,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function R(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,i,o,a){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range")}function D(t,e,n,i){0>e&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-n,2);r>o;o++)t[n+o]=(e&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function H(t,e,n,i){0>e&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-n,4);r>o;o++)t[n+o]=e>>>8*(i?o:3-o)&255}function z(t,e,n,i,o,r){if(e>o||r>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function U(t,e,n,i,o){return o||z(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,i,23,4),n+4}function V(t,e,n,i,o){return o||z(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,i,52,8),n+8}function B(t){if(t=k(t).replace($,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var n,i=t.length,o=null,r=[],a=0;i>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&r.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,128>n){if((e-=1)<0)break;r.push(n)}else if(2048>n){if((e-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function Y(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function Z(t,e){for(var n,i,o,r=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),i=n>>8,o=n%256,r.push(o),r.push(i);return r}function Q(t){return _.toByteArray(B(t))}function F(t,e,n,i){for(var o=0;i>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}var _=t("base64-js"),X=t("ieee754"),J=t("isarray");n.Buffer=r,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var q={};r.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),r.TYPED_ARRAY_SUPPORT?(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array):(r.prototype.length=void 0,r.prototype.parent=void 0),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);a>o&&t[o]===e[o];)++o;return o!==a&&(n=t[o],i=e[o]),i>n?-1:n>i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!J(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new r(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(i,o),o+=a.length}return i},r.byteLength=y,r.prototype._isBuffer=!0,r.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):A.apply(this,arguments)},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.indexOf=function(t,e){function n(t,e,n){for(var i=-1,o=0;n+o<t.length;o++)if(t[n+o]===e[-1===i?0:o-i]){if(-1===i&&(i=o),o-i+1===e.length)return n+i}else i=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(r.isBuffer(t))return n(this,t,e);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},r.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var o=i;i=e,e=0|n,n=o}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return N(this,t,e,n);case"binary":return L(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;r.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var i;if(r.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=r.prototype;else{var o=e-t;i=new r(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},r.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return i},r.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t+--e],o=1;e>0&&(o*=256);)i+=this[t+--e]*o;return i},r.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=this[t],o=1,r=0;++r<e&&(o*=256);)i+=this[t+r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},r.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var i=e,o=1,r=this[t+--i];i>0&&(o*=256);)r+=this[t+--i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},r.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),X.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),X.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),X.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),X.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||C(this,t,e,n,Math.pow(2,8*n),0);var o=1,r=0;for(this[e]=255&t;++r<n&&(o*=256);)this[e+r]=t/o&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||C(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var o=Math.pow(2,8*n-1);C(this,t,e,n,o-1,-o)}var r=0,a=1,s=0>t?1:0;for(this[e]=255&t;++r<n&&(a*=256);)this[e+r]=(t/a>>0)-s&255;return e+n},r.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var o=Math.pow(2,8*n-1);C(this,t,e,n,o-1,-o)}var r=n-1,a=1,s=0>t?1:0;for(this[e+r]=255&t;--r>=0&&(a*=256);)this[e+r]=(t/a>>0)-s&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||C(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o,a=i-n;if(this===t&&e>n&&i>e)for(o=a-1;o>=0;o--)t[o+e]=this[o+n];else if(1e3>a||!r.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof t)for(i=e;n>i;i++)this[i]=t;else{var o=W(t.toString()),r=o.length;for(i=e;n>i;i++)this[i]=o[i%r]}return this}};var $=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":38,ieee754:39,isarray:40}],38:[function(t,e,n){!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===s||e===d?63:h>e?-1:h+10>e?e-h+26+26:u+26>e?e-u:c+26>e?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var i,o,a,s,h,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;h="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,c=new r(3*t.length/4-h),a=h>0?t.length-4:t.length;var l=0;for(i=0,o=0;a>i;i+=4,o+=3)s=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===h?(s=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&s)):1===h&&(s=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(s>>8&255),n(255&s)),c}function i(t){function e(t){return o.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,r,a,s=t.length%3,h="";for(i=0,a=t.length-s;a>i;i+=3)r=(t[i]<<16)+(t[i+1]<<8)+t[i+2],h+=n(r);switch(s){case 1:r=t[t.length-1],h+=e(r>>2),h+=e(r<<4&63),h+="==";break;case 2:r=(t[t.length-2]<<8)+t[t.length-1],h+=e(r>>10),h+=e(r>>4&63),h+=e(r<<2&63),h+="="}return h}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),h="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0),l="-".charCodeAt(0),d="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],39:[function(t,e,n){n.read=function(t,e,n,i,o){var r,a,s=8*o-i-1,h=(1<<s)-1,c=h>>1,u=-7,l=n?o-1:0,d=n?-1:1,p=t[e+l];for(l+=d,r=p&(1<<-u)-1,p>>=-u,u+=s;u>0;r=256*r+t[e+l],l+=d,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=i;u>0;a=256*a+t[e+l],l+=d,u-=8);if(0===r)r=1-c;else{if(r===h)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,i),r-=c}return(p?-1:1)*a*Math.pow(2,r-i)},n.write=function(t,e,n,i,o,r){var a,s,h,c=8*r-o-1,u=(1<<c)-1,l=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,f=i?1:-1,E=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),e+=a+l>=1?d/h:d*Math.pow(2,1-l),e*h>=2&&(a++,h/=2),a+l>=u?(s=0,a=u):a+l>=1?(s=(e*h-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+p]=255&a,p+=f,a/=256,c-=8);t[n+p-f]|=128*E}},{}],40:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}]},{},[36]);